!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(s){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,s,a={},l=t.split(".")[0];t=t.split(".")[1];var d=l+"-"+t;return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][d.toLowerCase()]=function(t){return!!e.data(t,d)},e[l]=e[l]||{},r=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(a[t]=i)}),o.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},a,{constructor:o,namespace:l,widgetName:t,widgetFullName:d}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,r,o=n.call(arguments,1),s=0,a=o.length;s<a;s++)for(i in o[s])r=o[s][i],o[s].hasOwnProperty(i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=n.call(arguments,1),l=this;return s?this.length||"instance"!==o?this.each(function(){var n,i=e.data(this,r);return"instance"===o?(l=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,a),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):l=void 0:(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new i(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(r=s[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,r;for(n in t)r=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&r&&r.length&&(i=e(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,o){var s,a;for(a=0;a<n.length;a++)s=r.classesElementLookup[n[a]]||e(),s=e(t.add?e.unique(s.get().concat(t.element.get())):s.not(t.element).get()),r.classesElementLookup[n[a]]=s,i.push(n[a]),o&&t.classes[n[a]]&&i.push(t.classes[n[a]])}var i=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,r){e.inArray(t.target,r)!==-1&&(n.classesElementLookup[i]=e(r.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){if(t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+o.eventNamespace,c=l[2];c?r.on(d,c,a):n.on(d,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}}),e.widget}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return function(){function t(e,t,n){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var r,o=Math.max,s=Math.abs,a=/left|center|right/,l=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),t=o.offsetWidth,i.css("overflow","scroll"),n=o.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),r=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType,o=!i&&!r;return{element:n,isWindow:i,isDocument:r,offset:o?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(r){if(!r||!r.of)return f.apply(this,arguments);r=e.extend({},r);var u,h,p,g,v,y,m=e(r.of),b=e.position.getWithinInfo(r.within),x=e.position.getScrollInfo(b),_=(r.collision||"flip").split(" "),C={};return y=i(m),m[0].preventDefault&&(r.at="left top"),h=y.width,p=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(r[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=d.exec(n[0]),t=d.exec(n[1]),C[this]=[e?e[0]:0,t?t[0]:0],r[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===r.at[0]?v.left+=h:"center"===r.at[0]&&(v.left+=h/2),"bottom"===r.at[1]?v.top+=p:"center"===r.at[1]&&(v.top+=p/2),u=t(C.at,h,p),v.left+=u[0],v.top+=u[1],this.each(function(){var i,a,l=e(this),d=l.outerWidth(),c=l.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),w=d+f+n(this,"marginRight")+x.width,k=c+y+n(this,"marginBottom")+x.height,N=e.extend({},v),S=t(C.my,l.outerWidth(),l.outerHeight());"right"===r.my[0]?N.left-=d:"center"===r.my[0]&&(N.left-=d/2),"bottom"===r.my[1]?N.top-=c:"center"===r.my[1]&&(N.top-=c/2),N.left+=S[0],N.top+=S[1],i={marginLeft:f,marginTop:y},e.each(["left","top"],function(t,n){e.ui.position[_[t]]&&e.ui.position[_[t]][n](N,{targetWidth:h,targetHeight:p,elemWidth:d,elemHeight:c,collisionPosition:i,collisionWidth:w,collisionHeight:k,offset:[u[0]+S[0],u[1]+S[1]],my:r.my,at:r.at,within:b,elem:l})}),r.using&&(a=function(e){var t=g.left-N.left,n=t+h-d,i=g.top-N.top,a=i+p-c,u={target:{element:m,left:g.left,top:g.top,width:h,height:p},element:{element:l,left:N.left,top:N.top,width:d,height:c},horizontal:n<0?"left":t>0?"right":"center",vertical:a<0?"top":i>0?"bottom":"middle"};h<d&&s(t+n)<h&&(u.horizontal="center"),p<c&&s(i+a)<p&&(u.vertical="middle"),o(s(t),s(n))>o(s(i),s(a))?u.important="horizontal":u.important="vertical",r.using.call(this,e,u)}),l.offset(e.extend(N,{using:a}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,d=a+t.collisionWidth-s-r;t.collisionWidth>s?l>0&&d<=0?(n=e.left+l+t.collisionWidth-s-r,e.left+=l-n):d>0&&l<=0?e.left=r:l>d?e.left=r+s-t.collisionWidth:e.left=r:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-a,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,d=a+t.collisionHeight-s-r;t.collisionHeight>s?l>0&&d<=0?(n=e.top+l+t.collisionHeight-s-r,e.top+=l-n):d>0&&l<=0?e.top=r:l>d?e.top=r+s-t.collisionHeight:e.top=r:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-a-l,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?(n=e.left+f+h+p+t.collisionWidth-a-o,(n<0||n<s(c))&&(e.left+=f+h+p)):u>0&&(i=e.left-t.collisionPosition.marginLeft+f+h+p-l,(i>0||s(i)<u)&&(e.left+=f+h+p))},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-a-l,f="top"===t.my[1],h=f?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];c<0?(i=e.top+h+p+g+t.collisionHeight-a-o,(i<0||i<s(c))&&(e.top+=h+p+g)):u>0&&(n=e.top-t.collisionPosition.marginTop+h+p+g-l,(n>0||s(n)<u)&&(e.top+=h+p+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}return e.ui.focusable=function(n,i){var r,o,s,a,l,d=n.nodeName.toLowerCase();return"area"===d?(r=n.parentNode,o=r.name,!(!n.href||!o||"map"!==r.nodeName.toLowerCase())&&(s=e("img[usemap='#"+o+"']"),s.length>0&&s.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(d)?(a=!n.disabled,a&&(l=e(n).closest("fieldset")[0],l&&(a=!l.disabled))):a="a"===d?n.href||i:i,a&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./form","./version"],e):e(jQuery)}(function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){"1.7"===e.fn.jquery.substring(0,3)&&(e.each(["Width","Height"],function(t,n){function i(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?s["inner"+n].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,r)+"px")})}}),e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))})}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version","./escape-selector"],e):e(jQuery)}(function(e){return e.fn.labels=function(){var t,n,i,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),i=this.attr("id"),i&&(t=this.eq(0).parents().last(),o=t.add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",r=r.add(o.find(n).addBack(n))),this.pushStack(r))}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)}}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version","./focusable"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(r&&!o&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),i=e(t.target);i.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],void(i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);
return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,d=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(d=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(d=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,d=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(d=this.originalPageY)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,n,i){e.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",t),i.dropped=o.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,o=!1,s=i.scrollParentNotHidden[0],a=i.document[0];s!==a&&"HTML"!==s.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<r.scrollSensitivity?s.scrollTop=o=s.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(s.scrollTop=o=s.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<r.scrollSensitivity?s.scrollLeft=o=s.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(s.scrollLeft=o=s.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?o=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(o=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?o=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(o=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var r,o,s,a,l,d,c,u,f,h,p=i.options,g=p.snapTolerance,v=n.offset.left,y=v+i.helperProportions.width,m=n.offset.top,b=m+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--)l=i.snapElements[f].left-i.margins.left,d=l+i.snapElements[f].width,c=i.snapElements[f].top-i.margins.top,u=c+i.snapElements[f].height,y<l-g||v>d+g||b<c-g||m>u+g||!e.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(c-b)<=g,o=Math.abs(u-m)<=g,s=Math.abs(l-y)<=g,a=Math.abs(d-v)<=g,r&&(n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d}).left)),h=r||o||s||a,"outer"!==p.snapMode&&(r=Math.abs(c-m)<=g,o=Math.abs(u-b)<=g,s=Math.abs(l-v)<=g,a=Math.abs(d-y)<=g,r&&(n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(r||o||s||a||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=r||o||s||a||h)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,o=i.options,s=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});s.length&&(r=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}}),e.ui.draggable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./draggable","./mouse","../version","../widget"],e):e(jQuery)}(function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(n,i){var r=i||e.ui.ddmanager.current,o=!1;return!(!r||(r.currentItem||r.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===r.options.scope&&i.accept.call(i.element[0],r.currentItem||r.element)&&t(r,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,n))return o=!0,!1}),!o&&(!!this.accept.call(this.element[0],r.currentItem||r.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",n,this.ui(r)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,i,r){if(!n.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,a=o+t.helperProportions.width,l=s+t.helperProportions.height,d=n.offset.left,c=n.offset.top,u=d+n.proportions().width,f=c+n.proportions().height;switch(i){case"fit":return d<=o&&a<=u&&c<=s&&l<=f;case"intersect":return d<o+t.helperProportions.width/2&&a-t.helperProportions.width/2<u&&c<s+t.helperProportions.height/2&&l-t.helperProportions.height/2<f;case"pointer":return e(r.pageY,c,n.proportions().height)&&e(r.pageX,d,n.proportions().width);case"touch":return(s>=c&&s<=f||l>=c&&l<=f||s<c&&l>f)&&(o>=d&&o<=u||a>=d&&a<=u||o<d&&a>u);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=n?n.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(r=0;r<a.length;r++)if(a[r]===o[i].element[0]){o[i].proportions().height=0;continue e}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===s&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(n,i){var r=!1;return e.each((e.ui.ddmanager.droppables[n.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t(n,this,this.options.tolerance,i)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(n,i){n.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(n,i),e.each(e.ui.ddmanager.droppables[n.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,o,s,a=t(n,this,this.options.tolerance,i),l=!a&&this.isover?"isout":a&&!this.isover?"isover":null;l&&(this.options.greedy&&(o=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===o}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild="isover"===l)),r&&"isover"===l&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,i),r&&"isout"===l&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.uiBackCompat!==!1&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){var t="ui-effects-",n="ui-effects-style",i="ui-effects-animated",r=e;return e.effects={effect:{}},function(e,t){function n(e,t,n){var i=u[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=d(),i=n._rgba=[];return t=t.toLowerCase(),p(l,function(e,r){var o,s=r.re.exec(t),a=s&&r.parse(s),l=r.space||"rgba";if(a)return o=n[l](a),n[c[l].cache]=o[c[l].cache],i=n._rgba=o._rgba,!1}),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function r(e,t,n){return n=(n+1)%1,6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}var o,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=d.support={},h=e("<p>")[0],p=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),d.fn=e.extend(d.prototype,{parse:function(r,s,a,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(s),s=t);var u=this,f=e.type(r),h=this._rgba=[];return s!==t&&(r=[r,s,a,l],f="array"),"string"===f?this.parse(i(r)||o._default):"array"===f?(p(c.rgba.props,function(e,t){h[t.idx]=n(r[t.idx],t)}),this):"object"===f?(r instanceof d?p(c,function(e,t){r[t.cache]&&(u[t.cache]=r[t.cache].slice())}):p(c,function(t,i){var o=i.cache;p(i.props,function(e,t){if(!u[o]&&i.to){if("alpha"===e||null==r[e])return;u[o]=i.to(u._rgba)}u[o][t.idx]=n(r[e],t,!0)}),u[o]&&e.inArray(null,u[o].slice(0,3))<0&&(u[o][3]=1,i.from&&(u._rgba=i.from(u[o])))}),this):void 0},is:function(e){var t=d(e),n=!0,i=this;return p(c,function(e,r){var o,s=t[r.cache];return s&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],p(r.props,function(e,t){if(null!=s[t.idx])return n=s[t.idx]===o[t.idx]})),n}),n},_space:function(){var e=[],t=this;return p(c,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=d(e),r=i._space(),o=c[r],s=0===this.alpha()?d("transparent"):this,a=s[o.cache]||o.to(s._rgba),l=a.slice();return i=i[o.cache],p(o.props,function(e,r){var o=r.idx,s=a[o],d=i[o],c=u[r.type]||{};null!==d&&(null===s?l[o]=d:(c.mod&&(d-s>c.mod/2?s+=c.mod:s-d>c.mod/2&&(s-=c.mod)),l[o]=n((d-s)*t+s,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=d(t)._rgba;return d(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,s=e[3],a=Math.max(i,r,o),l=Math.min(i,r,o),d=a-l,c=a+l,u=.5*c;return t=l===a?0:i===a?60*(r-o)/d+360:r===a?60*(o-i)/d+120:60*(i-r)/d+240,n=0===d?0:u<=.5?d/c:d/(2-c),[Math.round(t)%360,n,u,null==s?1:s]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*r(a,s,t+1/3)),Math.round(255*r(a,s,t)),Math.round(255*r(a,s,t-1/3)),o]},p(c,function(i,r){var o=r.props,s=r.cache,l=r.to,c=r.from;d.fn[i]=function(i){if(l&&!this[s]&&(this[s]=l(this._rgba)),i===t)return this[s].slice();var r,a=e.type(i),u="array"===a||"object"===a?i:arguments,f=this[s].slice();return p(o,function(e,t){var i=u["object"===a?e:t.idx];null==i&&(i=f[t.idx]),f[t.idx]=n(i,t)}),c?(r=d(c(f)),r[s]=f,r):d(f)},p(o,function(t,n){d.fn[t]||(d.fn[t]=function(r){var o,s=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,d=this[l](),c=d[n.idx];return"undefined"===s?c:("function"===s&&(r=r.call(this,c),s=e.type(r)),null==r&&n.empty?this:("string"===s&&(o=a.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),d[n.idx]=r,this[l](d)))})})}),d.hook=function(t){var n=t.split(" ");p(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,s,a="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=d(o||r),!f.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===n?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(l){}r=r.blend(a&&"transparent"!==a?a:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=d(t.elem,n),t.end=d(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},d.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(r),function(){function t(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function n(t,n){var i,r,s={};for(i in n)r=n[i],t[i]!==r&&(o[i]||!e.fx.step[i]&&isNaN(parseFloat(r))||(s[i]=r));return s}var i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(r.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(r,o,s,a){var l=e.speed(o,s,a);return this.queue(function(){var o,s=e(this),a=s.attr("class")||"",d=l.children?s.find("*").addBack():s;d=d.map(function(){var n=e(this);return{el:n,start:t(this)}}),o=function(){e.each(i,function(e,t){r[t]&&s[t+"Class"](r[t])})},o(),d=d.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),d=d.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,d.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,r,o,s){return"boolean"==typeof i||void 0===i?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,r,o)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function r(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function o(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]||!!e.isFunction(t)||"object"==typeof t&&!t.effect}function s(e,t){var n=t.outerWidth(),i=t.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=r.exec(e)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=function(t){return function(n){return!!e(n).data(i)||t(n)}}(e.expr.filters.animated)),e.uiBackCompat!==!1&&e.extend(e.effects,{save:function(e,n){for(var i=0,r=n.length;i<r;i++)null!==n[i]&&e.data(t+n[i],e[0].style[n[i]])},restore:function(e,n){for(var i,r=0,o=n.length;r<o;r++)null!==n[r]&&(i=e.data(t+n[r]),e.css(n[r],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(s){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus"),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,n,i){return i||(i=n,n="effect"),e.effects.effect[t]=i,e.effects.effect[t].mode=n,i},scaledDimensions:function(e,t,n){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(t||100)/100:1,r="vertical"!==n?(t||100)/100:1;return{height:e.height()*r,width:e.width()*i,outerHeight:e.outerHeight()*r,outerWidth:e.outerWidth()*i}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var i=e.queue();t>1&&i.splice.apply(i,[1,0].concat(i.splice(t,n))),e.dequeue()},saveStyle:function(e){e.data(n,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(n)||"",e.removeData(n)},mode:function(e,t){var n=e.is(":hidden");return"toggle"===t&&(t=n?"show":"hide"),(n?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createPlaceholder:function(n){var i,r=n.css("position"),o=n.position();return n.css({marginTop:n.css("marginTop"),marginBottom:n.css("marginBottom"),marginLeft:n.css("marginLeft"),marginRight:n.css("marginRight")}).outerWidth(n.outerWidth()).outerHeight(n.outerHeight()),/^(static|relative)/.test(r)&&(r="absolute",i=e("<"+n[0].nodeName+">").insertAfter(n).css({display:/^(inline|ruby)/.test(n.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:n.css("marginTop"),marginBottom:n.css("marginBottom"),marginLeft:n.css("marginLeft"),marginRight:n.css("marginRight"),"float":n.css("float")}).outerWidth(n.outerWidth()).outerHeight(n.outerHeight()).addClass("ui-effects-placeholder"),n.data(t+"placeholder",i)),n.css({position:r,left:o.left,top:o.top}),i},removePlaceholder:function(e){var n=t+"placeholder",i=e.data(n);i&&(i.remove(),e.removeData(n))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function r(){l.removeData(i),e.effects.cleanUp(l),"hide"===n.mode&&l.hide(),a()}function a(){e.isFunction(d)&&d.call(l[0]),e.isFunction(t)&&t()}var l=e(this);n.mode=u.shift(),e.uiBackCompat===!1||s?"none"===n.mode?(l[c](),a()):o.call(l[0],n,r):(l.is(":hidden")?"hide"===c:"show"===c)?(l[c](),a()):o.call(l[0],n,a)}var n=r.apply(this,arguments),o=e.effects.effect[n.effect],s=o.mode,a=n.queue,l=a||"fx",d=n.complete,c=n.mode,u=[],f=function(t){var n=e(this),r=e.effects.mode(n,c)||s;n.data(i,!0),u.push(r),s&&("show"===r||r===s&&"hide"===r)&&n.show(),s&&"none"===r||e.effects.saveStyle(n),e.isFunction(t)&&t()};return e.fx.off||!o?c?this[c](n.duration,d):this.each(function(){d&&d.call(this)}):a===!1?this.each(f).each(t):this.queue(l,f).queue(l,t)},show:function(e){return function(t){if(o(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(o(t))return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(o(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):s(this.css("clip"),this)},transfer:function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),s=e("body"),a=o?s.scrollTop():0,l=o?s.scrollLeft():0,d=r.offset(),c={top:d.top-a,left:d.left-l,height:r.innerHeight(),width:r.innerWidth()},u=i.offset(),f=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:u.top-a,left:u.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){f.remove(),e.isFunction(n)&&n()})}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=s(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{
Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(e*-2+2)/2}})}(),e.effects}),function(e){"function"==typeof define&&define.amd?define(["jquery","../version","../effect"],e):e(jQuery)}(function(e){return e.effects.define("blind","hide",function(t,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=e(this),o=t.direction||"up",s=r.cssClip(),a={clip:e.extend({},s)},l=e.effects.createPlaceholder(r);a.clip[i[o][0]]=a.clip[i[o][1]],"show"===t.mode&&(r.cssClip(a.clip),l&&l.css(e.effects.clipToBox(a)),a.clip=s),l&&l.animate(e.effects.clipToBox(a),t.duration,t.easing),r.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:n})})}),function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/effects/effect-blind","jquery-ui/ui/data","jquery-ui/ui/effect","jquery-ui/ui/focusable","jquery-ui/ui/keycode","jquery-ui/ui/position","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/widget"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){return!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree.ui-deps"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree.ui-deps"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(t,n){t||(e.ui.fancytree.error(n="Fancytree assertion failed"+(n=n?": "+n:"")),e.error(n))}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){return"function"==typeof e}function r(e){return null==e?"":e.trim()}function o(e,t){var n,i,e=window.console?window.console[e]:null;if(e)try{e.apply(window.console,t)}catch(r){for(i="",n=0;n<t.length;n++)i+=t[n];e(i)}}function s(e,t,n,i,r){function o(){return a.apply(t,arguments)}function s(e){return a.apply(t,e)}var a,l,d;return a=t[e],l=i[e],d=t.ext[r],function(){var e=t._local,n=t._super,i=t._superApply;try{return t._local=d,t._super=o,t._superApply=s,l.apply(t,arguments)}finally{t._local=e,t._super=n,t._superApply=i}}}function a(t,n){return(void 0===t?e.Deferred(function(){this.resolve()}):e.Deferred(function(){this.resolveWith(t,n)})).promise()}function l(t,n){return(void 0===t?e.Deferred(function(){this.reject()}):e.Deferred(function(){this.rejectWith(t,n)})).promise()}function d(e,t){return function(){e.resolveWith(t)}}function c(t){var n=e.extend({},t.data()),t=n.json;return delete n.fancytree,delete n.uiFancytree,t&&(delete n.json,n=e.extend(n,t)),n}function u(e){return(""+e).replace(b,function(e){return C[e]})}function f(e){return e=e.toLowerCase(),function(t){return 0<=t.title.toLowerCase().indexOf(e)}}function h(n,r){var o,s,a;for(this.parent=n,this.tree=n.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},o=0,s=A.length;o<s;o++)this[a=A[o]]=r[a];for(a in null==this.unselectableIgnore&&null==this.unselectableStatus||(this.unselectable=!0),r.hideCheckbox&&e.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),r.data&&e.extend(this.data,r.data),r)D[a]||!this.tree.options.copyFunctionsToData&&i(r[a])||M[a]||(this.data[a]=r[a]);null==this.key?this.tree.options.defaultKey?(this.key=""+this.tree.options.defaultKey(this),t(this.key,"defaultKey() must return a unique key")):this.key="_"+v._nextNodeKey++:this.key=""+this.key,r.active&&(t(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),r.selected&&(this.tree.lastSelectedNode=this),(n=r.children)?n.length?this._setChildren(n):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function p(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(void 0!==this.options.lazyload&&e.error("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),void 0!==this.options.loaderror&&e.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),void 0!==this.options.fx&&e.error("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),void 0!==this.options.removeNode&&e.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.types={},this.columns={},this.data=c(this.$div),this._id=""+(this.options.treeId||e.ui.fancytree._nextId++),this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._tempCache={},this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.viewport=null,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove(),this.rootNode=new h({tree:this},{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,t=e("<ul>",{id:"ft-id-"+this._id,"class":"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=t,this.rootNode.ul=t[0],null==this.options.debugLevel&&(this.options.debugLevel=v.debugLevel)}if(!e.ui||!e.ui.fancytree){for(var g,v=null,y=new RegExp(/\.|\//),m=/[&<>"'\/]/g,b=/[<>"'\/]/g,x="$recursive_request",_="$request_target_invalid",C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},w={16:!0,17:!0,18:!0},k={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},N={16:"shift",17:"ctrl",18:"alt",91:"meta",93:"meta"},S={0:"",1:"left",2:"middle",3:"right"},E="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),T={},P="columns types".split(" "),A="checkbox expanded extraClasses folder icon iconTooltip key lazy partsel radiogroup refKey selected statusNodeType title tooltip type unselectable unselectableIgnore unselectableStatus".split(" "),D={},j={},M={active:!0,children:!0,data:!0,focus:!0},H=0;H<E.length;H++)T[E[H]]=!0;for(H=0;H<A.length;H++)g=A[H],D[g]=!0,g!==g.toLowerCase()&&(j[g.toLowerCase()]=g);var I=Array.isArray;return t(e.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),Date.now||(Date.now=function(){return(new Date).getTime()}),h.prototype={_findDirectChild:function(e){var t,n,i=this.children;if(i)if("string"==typeof e){for(t=0,n=i.length;t<n;t++)if(i[t].key===e)return i[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){t(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var n=0,i=e.length;n<i;n++)this.children.push(new h(this,e[n]));this.tree._callHook("treeStructureChanged",this.tree,"setChildren")},addChildren:function(n,i){var r,o,s,a,l=this.getFirstChild(),d=this.getLastChild(),c=[];for(e.isPlainObject(n)&&(n=[n]),this.children||(this.children=[]),r=0,o=n.length;r<o;r++)c.push(new h(this,n[r]));if(a=c[0],null==i?this.children=this.children.concat(c):(i=this._findDirectChild(i),t(0<=(s=e.inArray(i,this.children)),"insertBefore must be an existing child"),this.children.splice.apply(this.children,[s,0].concat(c))),l&&!i){for(r=0,o=c.length;r<o;r++)c[r].render();l!==this.getFirstChild()&&l.renderStatus(),d!==this.getLastChild()&&d.renderStatus()}else this.parent&&!this.parent.ul&&!this.tr||this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===c.length?c[0]:null),a},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,n){switch(n=void 0===n||"over"===n?"child":n){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var i=this.children?this.children[0]:null;return this.addChildren(e,i);case"child":case"over":return this.addChildren(e)}t(!1,"Invalid mode: "+n)},addPagingNode:function(t,n){var i,r;if(n=n||"child",!1!==t)return t=e.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,n);for(i=this.children.length-1;0<=i;i--)"paging"===(r=this.children[i]).statusNodeType&&this.removeChild(r);this.partload=!1},appendSibling:function(e){return this.addNode(e,"after")},applyCommand:function(e,t){return this.tree.applyCommand(e,this,t)},applyPatch:function(e){if(null===e)return this.remove(),a(this);var t,r,o={children:!0,expanded:!0,parent:!0};for(t in e)n(e,t)&&(r=e[t],o[t]||i(r)||(D[t]?this[t]=r:this.data[t]=r));return n(e,"children")&&(this.removeChildren(),e.children&&this._setChildren(e.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),n(e,"expanded")?this.setExpanded(e.expanded):a(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,n){return e.addNode(this.toDict(!0,n),t)},countChildren:function(e){var t,n,i,r=this.children;if(!r)return 0;if(i=r.length,!1!==e)for(t=0,n=i;t<n;t++)i+=r[t].countChildren();return i},debug:function(e){4<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){this.tree._callHook(e?"nodeRemoveMarkup":"nodeRemoveChildMarkup",this)},error:function(e){1<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("error",arguments))},findAll:function(e){e=i(e)?e:f(e);var t=[];return this.visit(function(n){e(n)&&t.push(n)}),t},findFirst:function(e){e=i(e)?e:f(e);var t=null;return this.visit(function(n){if(e(n))return t=n,!1}),t},findRelatedNode:function(e,t){return this.tree.findRelatedNode(this,e,t)},_changeSelectStatusAttrs:function(e){var n=!1,i=this.tree.options,r=v.evalOption("unselectable",this,this,i,!1),i=v.evalOption("unselectableStatus",this,this,i,void 0);switch(e=r&&null!=i?i:e){case!1:n=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:n=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case void 0:n=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:t(!1,"invalid state: "+e)}return n&&this.renderStatus(),n},fixSelection3AfterClick:function(e){var t=this.isSelected();this.visit(function(e){if(e._changeSelectStatusAttrs(t),e.radiogroup)return"skip"}),this.fixSelection3FromEndNodes(e)},fixSelection3FromEndNodes:function(e){var n=this.tree.options;t(3===n.selectMode,"expected selectMode 3"),function i(e){var t,r,o,s,a,l,d,c,u=e.children;if(u&&u.length){for(d=!(l=!0),t=0,r=u.length;t<r;t++)s=i(o=u[t]),v.evalOption("unselectableIgnore",o,o,n,!1)||(!1!==s&&(d=!0),!0!==s&&(l=!1));a=!!l||!!d&&void 0}else a=null==(c=v.evalOption("unselectableStatus",e,e,n,void 0))?!!e.selected:!!c;return e.partsel&&!e.selected&&e.lazy&&null==e.children&&(a=void 0),e._changeSelectStatusAttrs(a),a}(this),this.visitParents(function(e){for(var t,i,r,o=e.children,s=!0,a=!1,l=0,d=o.length;l<d;l++)t=o[l],v.evalOption("unselectableIgnore",t,t,n,!1)||(((i=null==(r=v.evalOption("unselectableStatus",t,t,n,void 0))?!!t.selected:!!r)||t.partsel)&&(a=!0),i||(s=!1));e._changeSelectStatusAttrs(i=!!s||!!a&&void 0)})},fromDict:function(t){for(var n in t)D[n]?this[n]=t[n]:"data"===n?e.extend(this.data,t.data):i(t[n])||M[n]||(this.data[n]=t[n]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){if(void 0!==this.hasChildren())return this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t,n){t=t||".";var i,r=[];return e.each(this.getParentList(!1,!0),function(e,t){i=""+(t.getIndex()+1),n&&(i=("0000000"+i).substr(-n)),r.push(i)}),r.join(t)},getKeyPath:function(e){var t=this.tree.options.keyPathSeparator;return t+this.getPath(!e,"key",t)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent)for(var e=this.parent.children,t=0,n=e.length-1;t<n;t++)if(e[t]===this)return e[t+1];return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var n=[],i=t?this:this.parent;i;)(e||i.parent)&&n.unshift(i),i=i.parent;return n},getPath:function(e,t,n){n=n||"/";var r,o=[],s=i(t=t||"title");return this.visitParents(function(e){e.parent&&(r=s?t(e):e[t],o.unshift(r))},e=!1!==e),o.join(n)},getPrevSibling:function(){if(this.parent)for(var e=this.parent.children,t=1,n=e.length;t<n;t++)if(e[t]===this)return e[t-1];return null},getSelectedNodes:function(e){var t=[];return this.visit(function(n){if(n.selected&&(t.push(n),!0===e))return"skip"}),t},hasChildren:function(){return this.lazy?null==this.children?void 0:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode()||void 0):!(!this.children||!this.children.length)},hasClass:function(e){return 0<=(" "+(this.extraClasses||"")+" ").indexOf(" "+e+" ")},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){3<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("info",arguments))},isActive:function(){return this.tree.activeNode===this},isBelowOf:function(e){return this.getIndexHier(".",5)>e.getIndexHier(".",5)},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(t){if(!t||t.tree!==this.tree)return!1;for(var n=this.parent;n;){if(n===t)return!0;n===n.parent&&e.error("Recursive parent link: "+n),n=n.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||void 0!==this.hasChildren()},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return void 0===this.hasChildren()},isVisible:function(){var e,t,n=this.tree.enableFilter,i=this.getParentList(!1,!1);if(n&&!this.match&&!this.subMatchCount)return!1;for(e=0,t=i.length;e<t;e++)if(!i[e].expanded)return!1;return!0},lazyLoad:function(t){e.error("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead.")},load:function(e){var n=this,i=this.isExpanded();return t(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),!1===(e=this.tree._triggerNodeEvent("lazyLoad",this))?a(this):(t("boolean"!=typeof e,"lazyLoad event must return source in data.result"),e=this.tree._callHook("nodeLoadChildren",this,e),i?(this.expanded=!0,e.always(function(){n.render()})):e.always(function(){n.renderStatus()}),e)):a(this)},makeVisible:function(t){for(var n=this,i=[],r=new e.Deferred,o=this.getParentList(!1,!1),s=o.length,a=!(t&&!0===t.noAnimation),l=!(t&&!1===t.scrollIntoView),d=s-1;0<=d;d--)i.push(o[d].setExpanded(!0,t));return e.when.apply(e,i).done(function(){l?n.scrollIntoView(a).done(function(){r.resolve()}):r.resolve()}),r.promise()},moveTo:function(n,i,r){void 0===i||"over"===i?i="child":"firstChild"===i&&(n.children&&n.children.length?(i="before",n=n.children[0]):i="child");var o,s=this.tree,a=this.parent,l="child"===i?n:n.parent;if(this!==n){if(this.parent?l.isDescendantOf(this)&&e.error("Cannot move a node to its own descendant"):e.error("Cannot move system root"),l!==a&&a.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===l)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else t(0<=(o=e.inArray(this,this.parent.children)),"invalid source parent"),this.parent.children.splice(o,1);if((this.parent=l).hasChildren())switch(i){case"child":l.children.push(this);break;case"before":t(0<=(o=e.inArray(n,l.children)),"invalid target parent"),l.children.splice(o,0,this);break;case"after":t(0<=(o=e.inArray(n,l.children)),"invalid target parent"),l.children.splice(o+1,0,this);break;default:e.error("Invalid mode "+i)}else l.children=[this];r&&n.visit(r,!0),l===a?l.triggerModifyChild("move",this):l.triggerModifyChild("add",this),s!==n.tree&&(this.warn("Cross-tree moveTo is experimental!"),this.visit(function(e){e.tree=n.tree},!0)),s._callHook("treeStructureChanged",s,"moveTo"),a.isDescendantOf(l)||a.render(),l.isDescendantOf(a)||l===a||l.render()}},navigate:function(t,n){var i=e.ui.keyCode;switch(t){case"left":case i.LEFT:if(this.expanded)return this.setExpanded(!1);break;case"right":case i.RIGHT:if(!this.expanded&&(this.children||this.lazy))return this.setExpanded()}if(i=this.findRelatedNode(t)){try{i.makeVisible({scrollIntoView:!1})}catch(t){}return!1===n?(i.setFocus(),a()):i.setActive()}return this.warn("Could not find related node '"+t+"'."),a()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(n){var i=this.parent,r=e.inArray(this,i.children),o=this;return t(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(n=this.tree._callHook("nodeLoadChildren",this,n)).done(function(e){var t=o.children;for(H=0;H<t.length;H++)t[H].parent=i;i.children.splice.apply(i.children,[r+1,0].concat(t)),o.children=null,o.remove(),i.render()}).fail(function(){o.setExpanded()}),n},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,n){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.debug("clearTimeout(%o)",this.tree.timer)),this.tree.timer=null;var i=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger expand"),i.setExpanded(!0)},n);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger activate"),i.setActive(!0)},n);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(n,i){if(void 0!==i&&(y=i).tree&&void 0!==y.statusNodeType)throw Error("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead.");var r=e.extend({effects:!0===n?{duration:200,queue:!1}:n,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent,topNode:null},i),o=r.scrollParent,s=this.tree.$container,l=s.css("overflow-y");o?o.jquery||(o=e(o)):o=this.tree.tbody||"scroll"!==l&&"auto"!==l?s.scrollParent():s,o[0]!==document&&o[0]!==document.body||(this.debug("scrollIntoView(): normalizing scrollParent to 'window':",o[0]),o=e(window));var d,c,u=new e.Deferred,f=this,h=e(this.span).height(),p=r.scrollOfs.top||0,g=r.scrollOfs.bottom||0,v=o.height(),y=o.scrollTop(),n=o,i=o[0]===window,l=r.topNode||null,s=null;return this.isRootNode()||!this.isVisible()?(this.info("scrollIntoView(): node is invisible."),a()):(i?(c=e(this.span).offset().top,d=l&&l.span?e(l.span).offset().top:0,n=e("html,body")):(t(o[0]!==document&&o[0]!==document.body,"scrollParent should be a simple element or `window`, not document or body."),i=o.offset().top,c=e(this.span).offset().top-i+y,d=l?e(l.span).offset().top-i+y:0,v-=Math.max(0,o.innerHeight()-o[0].clientHeight)),c<y+p?s=c-p:y+v-g<c+h&&(s=c+h-v+g,l&&(t(l.isRootNode()||l.isVisible(),"topNode must be visible"),d<s&&(s=d-p))),null===s?u.resolveWith(this):r.effects?(r.effects.complete=function(){u.resolveWith(f)},n.stop(!0).animate({scrollTop:s},r.effects)):(n[0].scrollTop=s,u.resolveWith(this)),u.promise())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e,t){return this.tree._callHook("nodeSetSelected",this,e,t)},setStatus:function(e,t,n){return this.tree._callHook("nodeSetStatus",this,e,t,n)},setTitle:function(e){this.title=e,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var n,i,r=this.children;if(r){if(r.sort(e=e||function(e,t){return e=e.title.toLowerCase(),t=t.title.toLowerCase(),e===t?0:t<e?1:-1}),t)for(n=0,i=r.length;n<i;n++)r[n].children&&r[n].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,n){var i,r,o,s,a={},l=this;if(e.each(A,function(e,t){!l[t]&&!1!==l[t]||(a[t]=l[t])}),e.isEmptyObject(this.data)||(a.data=e.extend({},this.data),e.isEmptyObject(a.data)&&delete a.data),n){if(!1===(s=n(a,l)))return!1;"skip"===s&&(t=!1)}if(t&&I(this.children))for(a.children=[],i=0,r=this.children.length;i<r;i++)(o=this.children[i]).isStatusNode()||!1!==(s=o.toDict(!0,n))&&a.children.push(s);return a},toggleClass:function(t,n){var i,o,s=t.match(/\S+/g)||[],a=0,l=!1,d=this[this.tree.statusClassPropName],c=" "+(this.extraClasses||"")+" ";for(d&&e(d).toggleClass(t,n);i=s[a++];)if(o=0<=c.indexOf(" "+i+" "),n=void 0===n?!o:!!n)o||(c+=i+" ",l=!0);else for(;-1<c.indexOf(" "+i+" ");)c=c.replace(" "+i+" "," ");return this.extraClasses=r(c),l},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"FancytreeNode@"+this.key+"[title='"+this.title+"']"},triggerModifyChild:function(t,n,i){var r=this.tree.options.modifyChild;r&&(n&&n.parent!==this&&e.error("childNode "+n+" is not a child of "+this),n={node:this,tree:this.tree,operation:t,childNode:n||null},i&&e.extend(n,i),r({type:"modifyChild"},n))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var n,i,r=!0,o=this.children;if(!0===t&&(!1===(r=e(this))||"skip"===r))return r;if(o)for(n=0,i=o.length;n<i&&!1!==(r=o[n].visit(e,!0));n++);return r},visitAndLoad:function(t,n,i){var r,o,s,l=this;return!t||!0!==n||!1!==(o=t(l))&&"skip"!==o?l.children||l.lazy?(r=new e.Deferred,s=[],l.load().done(function(){for(var n=0,i=l.children.length;n<i;n++){if(!1===(o=l.children[n].visitAndLoad(t,!0,!0))){r.reject();break}"skip"!==o&&s.push(o)}e.when.apply(this,s).then(function(){r.resolve()})}),r.promise()):a():i?o:a()},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var n=this.parent;n;){if(!1===e(n))return!1;n=n.parent}return!0},visitSiblings:function(e,t){for(var n,i=this.parent.children,r=0,o=i.length;r<o;r++)if(n=i[r],(t||n!==this)&&!1===e(n))return!1;return!0},warn:function(e){2<=this.tree.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("warn",arguments))}},p.prototype={_makeHookContext:function(t,n,i){var r,o;return void 0!==t.node?(n&&t.originalEvent!==n&&e.error("invalid args"),r=t):t.tree?r={node:t,tree:o=t.tree,widget:o.widget,options:o.widget.options,originalEvent:n,typeInfo:o.types[t.type]||{}}:t.widget?r={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:n}:e.error("invalid args"),i&&e.extend(r,i),r},_callHook:function(t,n,r){var o=this._makeHookContext(n),s=this[t],n=Array.prototype.slice.call(arguments,2);return i(s)||e.error("_callHook('"+t+"') is not a function"),n.unshift(o),s.apply(this,n)},_setExpiringValue:function(e,t,n){this._tempCache[e]={value:t,expire:Date.now()+(+n||50)}},_getExpiringValue:function(e){var t=this._tempCache[e];return t&&t.expire>Date.now()?t.value:(delete this._tempCache[e],null)},_usesExtension:function(t){return 0<=e.inArray(t,this.options.extensions)},_requireExtension:function(n,i,r,o){null!=r&&(r=!!r);var s=this._local.name,a=this.options.extensions,l=e.inArray(n,a)<e.inArray(s,a),a=i&&null==this.ext[n],l=!a&&null!=r&&r!==l;return t(s&&s!==n,"invalid or same name '"+s+"' (require yourself?)"),!a&&!l||(o||(a||i?(o="'"+s+"' extension requires '"+n+"'",l&&(o+=" to be registered "+(r?"before":"after")+" itself")):o="If used together, `"+n+"` must be registered "+(r?"before":"after")+" `"+s+"`"),e.error(o),!1)},activateKey:function(e,t){return e=this.getNodeByKey(e),e?e.setActive(!0,t):this.activeNode&&this.activeNode.setActive(!1,t),e},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyCommand:function(t,n,i){var r;switch(n=n||this.getActiveNode(),t){case"moveUp":(r=n.getPrevSibling())&&(n.moveTo(r,"before"),n.setActive());break;case"moveDown":(r=n.getNextSibling())&&(n.moveTo(r,"after"),n.setActive());break;case"indent":(r=n.getPrevSibling())&&(n.moveTo(r,"child"),r.setExpanded(),n.setActive());break;case"outdent":n.isTopLevel()||(n.moveTo(n.getParent(),"after"),n.setActive());break;case"remove":r=n.getPrevSibling()||n.getParent(),n.remove(),r&&r.setActive();break;case"addChild":n.editCreateNode("child","");break;case"addSibling":n.editCreateNode("after","");break;case"rename":n.editStart();break;case"down":case"first":case"last":case"left":case"parent":case"right":case"up":return n.navigate(t);default:e.error("Unhandled command: '"+t+"'")}},applyPatch:function(n){for(var i,r,o,s,a=n.length,l=[],c=0;c<a;c++)t(2===(i=n[c]).length,"patchList must be an array of length-2-arrays"),r=i[0],o=i[1],(s=null===r?this.rootNode:this.getNodeByKey(r))?(i=new e.Deferred,l.push(i),s.applyPatch(o).always(d(i,s))):this.warn("could not find node with key '"+r+"'");return e.when.apply(e,l).promise()},clear:function(e){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){4<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("log",arguments))},destroy:function(){this.widget.destroy()},enable:function(e){!1===e?this.widget.disable():this.widget.enable()},enableUpdate:function(e){return!!this._enableUpdate==!!(e=!1!==e)?e:((this._enableUpdate=e)?(this.debug("enableUpdate(true): redraw "),this._callHook("treeStructureChanged",this,"enableUpdate"),this.render()):this.debug("enableUpdate(false)..."),!e)},error:function(e){1<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("error",arguments))},expandAll:function(e,t){var n=this.enableUpdate(!1);e=!1!==e,this.visit(function(n){!1!==n.hasChildren()&&n.isExpanded()!==e&&n.setExpanded(e,t)}),this.enableUpdate(n)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(e,t){function n(n){if((r=e(n)?n:r)||n===t)return!1}var i,r=null,o=this.getFirstChild();return e="string"==typeof e?(i=new RegExp("^"+e,"i"),function(e){return i.test(e.title)}):e,this.visitRows(n,{start:t=t||o,includeSelf:!1}),r||t===o||this.visitRows(n,{start:o,includeSelf:!0}),r},findRelatedNode:function(t,n,i){var r=null,o=e.ui.keyCode;switch(n){case"parent":case o.BACKSPACE:t.parent&&t.parent.parent&&(r=t.parent);break;case"first":case o.HOME:this.visit(function(e){if(e.isVisible())return r=e,!1});break;case"last":case o.END:this.visit(function(e){e.isVisible()&&(r=e)});break;case"left":case o.LEFT:t.expanded?t.setExpanded(!1):t.parent&&t.parent.parent&&(r=t.parent);break;case"right":case o.RIGHT:t.expanded||!t.children&&!t.lazy?t.children&&t.children.length&&(r=t.children[0]):(t.setExpanded(),r=t);break;case"up":case o.UP:this.visitRows(function(e){return r=e,!1},{start:t,reverse:!0,includeSelf:!1});break;case"down":case o.DOWN:this.visitRows(function(e){return r=e,!1},{start:t,includeSelf:!1});break;default:this.tree.warn("Unknown relation '"+n+"'.")}return r},generateFormElements:function(t,n,i){function r(t){l.append(e("<input>",{type:"checkbox",name:o,value:t.key,checked:!0}))}i=i||{};var o="string"==typeof t?t:"ft_"+this._id+"[]",s="string"==typeof n?n:"ft_"+this._id+"_active",a="fancytree_result_"+this._id,l=e("#"+a),d=3===this.options.selectMode&&!1!==i.stopOnParents;l.length?l.empty():l=e("<div>",{id:a}).hide().insertAfter(this.$container),!1!==n&&this.activeNode&&l.append(e("<input>",{type:"radio",name:s,value:this.activeNode.key,checked:!0})),i.filter?this.visit(function(e){var t=i.filter(e);return"skip"===t?t:void(!1!==t&&r(e))}):!1!==t&&(d=this.getSelectedNodes(d),e.each(d,function(e,t){r(t)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getOption:function(e){return this.widget.option(e)},getNodeByKey:function(e,t){var n,i;return!t&&(n=document.getElementById(this.options.idPrefix+e))?n.ftnode||null:(t=t||this.rootNode,e=""+e,t.visit(function(t){if(t.key===e)return i=t,!1},!(i=null)),i)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){3<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("info",arguments))},isLoading:function(){var e=!1;return this.rootNode.visit(function(t){if(t._isLoading||t._requestId)return!(e=!0)},!0),e},loadKeyPath:function(t,n){var i,r,o,s=this,a=new e.Deferred,l=this.getRootNode(),d=this.options.keyPathSeparator,c=[],u=e.extend({},n);for("function"==typeof n?i=n:n&&n.callback&&(i=n.callback),u.callback=function(e,t,n){i&&i.call(e,t,n),a.notifyWith(e,[{node:t,status:n}])},null==u.matchKey&&(u.matchKey=function(e,t){return e.key===t}),I(t)||(t=[t]),r=0;r<t.length;r++)(o=t[r]).charAt(0)===d&&(o=o.substr(1)),c.push(o.split(d));return setTimeout(function(){s._loadKeyPathImpl(a,u,l,c).done(function(){a.resolve()})},0),a.promise()},_loadKeyPathImpl:function(t,i,r,o){var s,a,l,c,u,f,h,p,g,v,y=this;for(h={},a=0;a<o.length;a++)for(g=o[a],p=r;g.length;){if(l=g.shift(),!(c=function(e,t){var n,r,o=e.children;if(o)for(n=0,r=o.length;n<r;n++)if(i.matchKey(o[n],t))return o[n];return null}(p,l))){this.warn("loadKeyPath: key not found: "+l+" (parent: "+p+")"),i.callback(this,l,"error");break}if(0===g.length){i.callback(this,c,"ok");break}if(c.lazy&&void 0===c.hasChildren()){i.callback(this,c,"loaded"),h[l=c.key]?h[l].pathSegList.push(g):h[l]={parent:c,pathSegList:[g]};break}i.callback(this,c,"loaded"),p=c}for(u in s=[],h)n(h,u)&&(f=h[u],v=new e.Deferred,s.push(v),function(e,t,n){i.callback(y,t,"loading"),t.load().done(function(){
y._loadKeyPathImpl.call(y,e,i,t,n).always(d(e,y))}).fail(function(n){y.warn("loadKeyPath: error loading lazy "+t),i.callback(y,c,"error"),e.rejectWith(y)})}(v,f.parent,f.pathSegList));return e.when.apply(e,s).promise()},reactivate:function(e){var t,n=this.activeNode;return n?(this.activeNode=null,t=n.setActive(!0,{noFocus:!0}),e&&n.setFocus(),t):a()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},selectAll:function(e){this.visit(function(t){t.setSelected(e)})},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},setOption:function(e,t){return this.widget.option(e,t)},debugTime:function(e){4<=this.options.debugLevel&&void 0},debugTimeEnd:function(e){4<=this.options.debugLevel&&void 0},toDict:function(e,t){return t=this.rootNode.toDict(!0,t),e?t:t.children},toString:function(){return"Fancytree@"+this._id},_triggerNodeEvent:function(e,t,n,i){return i=this._makeHookContext(t,n,i),n=this.widget._trigger(e,n,i),!1!==n&&void 0!==i.result?i.result:n},_triggerTreeEvent:function(e,t,n){return n=this._makeHookContext(this,t,n),t=this.widget._trigger(e,t,n),!1!==t&&void 0!==n.result?n.result:t},visit:function(e){return this.rootNode.visit(e,!1)},visitRows:function(e,n){if(!this.rootNode.hasChildren())return!1;if(n&&n.reverse)return delete n.reverse,this._visitRowsUp(e,n);for(var i,r,o,s=0,a=!1===(n=n||{}).includeSelf,l=!!n.includeHidden,d=!l&&this.enableFilter,c=n.start||this.rootNode.children[0],u=c.parent;u;){for(t(0<=(r=(o=u.children).indexOf(c)+s),"Could not find "+c+" in parent's children: "+u),i=r;i<o.length;i++)if(c=o[i],!d||c.match||c.subMatchCount){if(!a&&!1===e(c))return!1;if(a=!1,c.children&&c.children.length&&(l||c.expanded)&&!1===c.visit(function(t){return!d||t.match||t.subMatchCount?!1!==e(t)&&(l||!t.children||t.expanded?void 0:"skip"):"skip"},!1))return!1}u=(c=u).parent,s=1}return!0},_visitRowsUp:function(e,t){for(var n,i,r,o=!!t.includeHidden,s=t.start||this.rootNode.children[0];;){if((n=(r=s.parent).children)[0]===s){if(!(s=r).parent)break;n=r.children}else for(i=n.indexOf(s),s=n[i-1];(o||s.expanded)&&s.children&&s.children.length;)s=(n=(r=s).children)[n.length-1];if((o||s.isVisible())&&!1===e(s))return!1}},warn:function(e){2<=this.options.debugLevel&&(Array.prototype.unshift.call(arguments,this.toString()),o("warn",arguments))}},e.extend(p.prototype,{nodeClick:function(e){var t,n,i=e.targetType,r=e.node;if("expander"===i)r.isLoading()?r.debug("Got 2nd click while loading: ignored"):this._callHook("nodeToggleExpanded",e);else if("checkbox"===i)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(t=!(n=!1),r.folder)switch(e.options.clickFolderMode){case 2:t=!(n=!0);break;case 3:n=t=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),n&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var n,i,r,o=e.node;if(o.parent)for(i=0,r=(n=o.parent.children).length;i<r;i++)n[i]!==o&&n[i].expanded&&this._callHook("nodeSetExpanded",n[i],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){var n=t.originalEvent,i=t.node,r=t.tree,o=t.options,s=n.which,a=n.key||String.fromCharCode(s),l=!!(n.altKey||n.ctrlKey||n.metaKey),d=!N[s]&&!k[s]&&!l,s=e(n.target),c=!0,u=!(n.ctrlKey||!o.autoActivate);if(i||(l=this.getActiveNode()||this.getFirstChild())&&(l.setFocus(),(i=t.node=this.focusNode).debug("Keydown force focus on active node")),o.quicksearch&&d&&!s.is(":input:enabled"))return 500<(s=Date.now())-r.lastQuicksearchTime&&(r.lastQuicksearchTerm=""),r.lastQuicksearchTime=s,r.lastQuicksearchTerm+=a,(a=r.findNextNode(r.lastQuicksearchTerm,r.getActiveNode()))&&a.setActive(),void n.preventDefault();switch(v.eventToString(n)){case"+":case"=":r.nodeSetExpanded(t,!0);break;case"-":r.nodeSetExpanded(t,!1);break;case"space":i.isPagingNode()?r._triggerNodeEvent("clickPaging",t,n):v.evalOption("checkbox",i,i,o,!1)?r.nodeToggleSelected(t):r.nodeSetActive(t,!0);break;case"return":r.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":i.navigate(n.which,u);break;default:c=!1}c&&n.preventDefault()},nodeLoadChildren:function(r,o){var s,a,l,d=null,c=!0,u=r.tree,f=r.node,h=f.parent,p="nodeLoadChildren",g=Date.now();return i(o)&&t(!i(o=o.call(u,{type:"source"},r)),"source callback must not return another function"),i(o.then)?d=o:o.url?d=(s=e.extend({},r.options.ajax,o)).debugDelay?(a=s.debugDelay,delete s.debugDelay,I(a)&&(a=a[0]+Math.random()*(a[1]-a[0])),f.warn("nodeLoadChildren waiting debugDelay "+Math.round(a)+" ms ..."),e.Deferred(function(t){setTimeout(function(){e.ajax(s).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},a)})):e.ajax(s):e.isPlainObject(o)||I(o)?c=!(d={then:function(e,t){e(o,null,null)}}):e.error("Invalid source type: "+o),f._requestId&&(f.warn("Recursive load request #"+g+" while #"+f._requestId+" is pending."),f._requestId=g),c&&(u.debugTime(p),u.nodeSetStatus(r,"loading")),l=new e.Deferred,d.then(function(t,i,s){var a,d;if("json"!==o.dataType&&"jsonp"!==o.dataType||"string"!=typeof t||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),f._requestId&&f._requestId>g)l.rejectWith(this,[x]);else if(null!==f.parent||null===h){if(r.options.postProcess){try{(d=u._triggerNodeEvent("postProcess",r,r.originalEvent,{response:t,error:null,dataType:o.dataType})).error&&u.warn("postProcess returned error:",d)}catch(t){d={error:t,message:""+t,details:"postProcess failed"}}if(d.error)return a=e.isPlainObject(d.error)?d.error:{message:d.error},a=u._makeHookContext(f,null,a),void l.rejectWith(this,[a]);(I(d)||e.isPlainObject(d)&&I(d.children))&&(t=d)}else t&&n(t,"d")&&r.options.enableAspx&&(42===r.options.enableAspx&&u.warn("The default for enableAspx will change to `false` in the fututure. Pass `enableAspx: true` or implement postProcess to silence this warning."),t="string"==typeof t.d?e.parseJSON(t.d):t.d);l.resolveWith(this,[t])}else l.rejectWith(this,[_])},function(e,t,n){n=u._makeHookContext(f,null,{error:e,args:Array.prototype.slice.call(arguments),message:n,details:e.status+": "+n}),l.rejectWith(this,[n])}),l.done(function(n){var o,s,a;u.nodeSetStatus(r,"ok"),e.isPlainObject(n)?(t(f.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),t(I(n.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),o=(s=n).children,delete s.children,e.each(P,function(e,t){void 0!==s[t]&&(u[t]=s[t],delete s[t])}),e.extend(u.data,s)):o=n,t(I(o),"expected array of children"),f._setChildren(o),u.options.nodata&&0===o.length&&(i(u.options.nodata)?a=u.options.nodata.call(u,{type:"nodata"},r):!0===u.options.nodata&&f.isRootNode()?a=u.options.strings.noData:"string"==typeof u.options.nodata&&f.isRootNode()&&(a=u.options.nodata),a&&f.setStatus("nodata",a)),u._triggerNodeEvent("loadChildren",f)}).fail(function(e){var t;e!==x?e!==_?(e.node&&e.error&&e.message?t=e:"[object Object]"===(t=u._makeHookContext(f,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""})).message&&(t.message=""),f.warn("Load children failed ("+t.message+")",t),!1!==u._triggerNodeEvent("loadError",t,null)&&u.nodeSetStatus(r,"error",t.message,t.details)):f.warn("Lazy parent node was removed while loading: discarding response."):f.warn("Ignored response for obsolete load request #"+g+" (expected #"+f._requestId+")")}).always(function(){f._requestId=null,c&&u.debugTimeEnd(p)}),l.promise()},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(n,i){var r=n.node,o=e.extend({},n,{node:i}),s=r.children;return 1===s.length?(t(i===s[0],"invalid single child"),this.nodeRemoveChildren(n)):(this.activeNode&&(i===this.activeNode||this.activeNode.isDescendantOf(i))&&this.activeNode.setActive(!1),this.focusNode&&(i===this.focusNode||this.focusNode.isDescendantOf(i))&&(this.focusNode=null),this.nodeRemoveMarkup(o),this.nodeRemoveChildren(o),t(0<=(o=e.inArray(i,s)),"invalid child"),r.triggerModifyChild("remove",i),i.visit(function(e){e.parent=null},!0),this._callHook("treeRegisterNode",this,!1,i),s.splice(o,1),void 0)},nodeRemoveChildMarkup:function(t){t=t.node,t.ul&&(t.isRootNode()?e(t.ul).empty():(e(t.ul).remove(),t.ul=null),t.visit(function(e){e.li=e.ul=null}))},nodeRemoveChildren:function(e){var t=e.tree,n=e.node;n.children&&(this.activeNode&&this.activeNode.isDescendantOf(n)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(n)&&(this.focusNode=null),this.nodeRemoveChildMarkup(e),n.triggerModifyChild("remove",null),n.visit(function(e){e.parent=null,t._callHook("treeRegisterNode",t,!1,e)}),n.lazy?n.children=[]:n.children=null,n.isRootNode()||(n.expanded=!1),this.nodeRenderStatus(e))},nodeRemoveMarkup:function(t){var n=t.node;n.li&&(e(n.li).remove(),n.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(n,i,r,o,s){var a,l,d,c,u,f,h,p=n.node,g=n.tree,v=n.options,y=v.aria,m=!1,b=p.parent,x=!b,_=p.children,C=null;if(!1!==g._enableUpdate&&(x||b.ul)){if(t(x||b.ul,"parent UL must exist"),x||(p.li&&(i||p.li.parentNode!==p.parent.ul)&&(p.li.parentNode===p.parent.ul?C=p.li.nextSibling:this.debug("Unlinking "+p+" (must be child of "+p.parent+")"),this.nodeRemoveMarkup(n)),p.li?this.nodeRenderStatus(n):(m=!0,p.li=document.createElement("li"),(p.li.ftnode=p).key&&v.generateIds&&(p.li.id=v.idPrefix+p.key),p.span=document.createElement("span"),p.span.className="fancytree-node",y&&!p.tr&&e(p.li).attr("role","treeitem"),p.li.appendChild(p.span),this.nodeRenderTitle(n),v.createNode&&v.createNode.call(g,{type:"createNode"},n)),v.renderNode&&v.renderNode.call(g,{type:"renderNode"},n)),_){if(x||p.expanded||!0===r){for(p.ul||(p.ul=document.createElement("ul"),(!0!==o||s)&&p.expanded||(p.ul.style.display="none"),y&&e(p.ul).attr("role","group"),p.li?p.li.appendChild(p.ul):p.tree.$div.append(p.ul)),c=0,u=_.length;c<u;c++)h=e.extend({},n,{node:_[c]}),this.nodeRender(h,i,r,!1,!0);for(a=p.ul.firstChild;a;)a=(d=a.ftnode)&&d.parent!==p?(p.debug("_fixParent: remove missing "+d,a),f=a.nextSibling,a.parentNode.removeChild(a),f):a.nextSibling;for(a=p.ul.firstChild,c=0,u=_.length-1;c<u;c++)(l=_[c])===(d=a.ftnode)?a=a.nextSibling:p.ul.insertBefore(l.li,d.li)}}else p.ul&&(this.warn("remove child markup for "+p),this.nodeRemoveChildMarkup(n));x||m&&b.ul.insertBefore(p.li,C)}},nodeRenderTitle:function(t,n){var i,r,o=t.node,s=t.tree,a=t.options,l=a.aria,d=o.getLevel(),c=[];void 0!==n&&(o.title=n),o.span&&!1!==s._enableUpdate&&(n=l&&!1!==o.hasChildren()?" role='button'":"",d<a.minExpandLevel?(o.lazy||(o.expanded=!0),1<d&&c.push("<span "+n+" class='fancytree-expander fancytree-expander-fixed'></span>")):c.push("<span "+n+" class='fancytree-expander'></span>"),(d=v.evalOption("checkbox",o,o,a,!1))&&!o.isStatusNode()&&(i="fancytree-checkbox",("radio"===d||o.parent&&o.parent.radiogroup)&&(i+=" fancytree-radio"),c.push("<span "+(n=l?" role='checkbox'":"")+" class='"+i+"'></span>")),void 0!==o.data.iconClass&&(o.icon?e.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(o.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.data.iconClass)),!1!==(i=v.evalOption("icon",o,o,a,!0))&&(n=l?" role='presentation'":"",r=(r=v.evalOption("iconTooltip",o,o,a,null))?" title='"+u(r)+"'":"","string"==typeof i?y.test(i)?(i="/"===i.charAt(0)?i:(a.imagePath||"")+i,c.push("<img src='"+i+"' class='fancytree-icon'"+r+" alt='' />")):c.push("<span "+n+" class='fancytree-custom-icon "+i+"'"+r+"></span>"):i.text?c.push("<span "+n+" class='fancytree-custom-icon "+(i.addClass||"")+"'"+r+">"+v.escapeHtml(i.text)+"</span>"):i.html?c.push("<span "+n+" class='fancytree-custom-icon "+(i.addClass||"")+"'"+r+">"+i.html+"</span>"):c.push("<span "+n+" class='fancytree-icon'"+r+"></span>")),n="",n=(n=a.renderTitle?a.renderTitle.call(s,{type:"renderTitle"},t)||"":n)||"<span class='fancytree-title'"+(r=(r=!0===(r=v.evalOption("tooltip",o,o,a,null))?o.title:r)?" title='"+u(r)+"'":"")+(a.titlesTabbable?" tabindex='0'":"")+">"+(a.escapeTitles?v.escapeHtml(o.title):o.title)+"</span>",c.push(n),o.span.innerHTML=c.join(""),this.nodeRenderStatus(t),a.enhanceTitle&&(t.$title=e(">span.fancytree-title",o.span),n=a.enhanceTitle.call(s,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var n,i=t.node,r=t.tree,o=t.options,s=i.hasChildren(),a=i.isLastSibling(),l=o.aria,d=o._classNames,c=[],t=i[r.statusClassPropName];t&&!1!==r._enableUpdate&&(l&&(n=e(i.tr||i.li)),c.push(d.node),r.activeNode===i&&c.push(d.active),r.focusNode===i&&c.push(d.focused),i.expanded&&c.push(d.expanded),l&&(!1===s?n.removeAttr("aria-expanded"):n.attr("aria-expanded",Boolean(i.expanded))),i.folder&&c.push(d.folder),!1!==s&&c.push(d.hasChildren),a&&c.push(d.lastsib),i.lazy&&null==i.children&&c.push(d.lazy),i.partload&&c.push(d.partload),i.partsel&&c.push(d.partsel),v.evalOption("unselectable",i,i,o,!1)&&c.push(d.unselectable),i._isLoading&&c.push(d.loading),i._error&&c.push(d.error),i.statusNodeType&&c.push(d.statusNodePrefix+i.statusNodeType),i.selected?(c.push(d.selected),l&&n.attr("aria-selected",!0)):l&&n.attr("aria-selected",!1),i.extraClasses&&c.push(i.extraClasses),!1===s?c.push(d.combinedExpanderPrefix+"n"+(a?"l":"")):c.push(d.combinedExpanderPrefix+(i.expanded?"e":"c")+(i.lazy&&null==i.children?"d":"")+(a?"l":"")),c.push(d.combinedIconPrefix+(i.expanded?"e":"c")+(i.folder?"f":"")),t.className=c.join(" "),i.li&&e(i.li).toggleClass(d.lastsib,a))},nodeSetActive:function(n,i,r){var o=n.node,s=n.tree,d=n.options,c=!0===(r=r||{}).noEvents,u=!0===r.noFocus,r=!1!==r.scrollIntoView;return o===s.activeNode==(i=!1!==i)?a(o):(r&&n.originalEvent&&e(n.originalEvent.target).is("a,:checkbox")&&(o.info("Not scrolling while clicking an embedded link."),r=!1),i&&!c&&!1===this._triggerNodeEvent("beforeActivate",o,n.originalEvent)?l(o,["rejected"]):(i?(s.activeNode&&(t(s.activeNode!==o,"node was active (inconsistency)"),i=e.extend({},n,{node:s.activeNode}),s.nodeSetActive(i,!1),t(null===s.activeNode,"deactivate was out of sync?")),d.activeVisible&&o.makeVisible({scrollIntoView:r}),s.activeNode=o,s.nodeRenderStatus(n),u||s.nodeSetFocus(n),c||s._triggerNodeEvent("activate",o,n.originalEvent)):(t(s.activeNode===o,"node was not active (inconsistency)"),s.activeNode=null,this.nodeRenderStatus(n),c||n.tree._triggerNodeEvent("deactivate",o,n.originalEvent)),a(o)))},nodeSetExpanded:function(t,n,r){var o,s,d,c,u,f,h=t.node,p=t.tree,g=t.options,v=!0===(r=r||{}).noAnimation,y=!0===r.noEvents;if(n=!1!==n,e(h.li).hasClass(g._classNames.animating))return h.warn("setExpanded("+n+") while animating: ignored."),l(h,["recursion"]);if(h.expanded&&n||!h.expanded&&!n)return a(h);if(n&&!h.lazy&&!h.hasChildren())return a(h);if(!n&&h.getLevel()<g.minExpandLevel)return l(h,["locked"]);if(!y&&!1===this._triggerNodeEvent("beforeExpand",h,t.originalEvent))return l(h,["rejected"]);if(v||h.isVisible()||(v=r.noAnimation=!0),s=new e.Deferred,n&&!h.expanded&&g.autoCollapse){u=h.getParentList(!1,!0),f=g.autoCollapse;try{for(g.autoCollapse=!1,d=0,c=u.length;d<c;d++)this._callHook("nodeCollapseSiblings",u[d],r)}finally{g.autoCollapse=f}}return s.done(function(){var e=h.getLastChild();n&&g.autoScroll&&!v&&e&&p._enableUpdate?e.scrollIntoView(!0,{topNode:h}).always(function(){y||t.tree._triggerNodeEvent(n?"expand":"collapse",t)}):y||t.tree._triggerNodeEvent(n?"expand":"collapse",t)}),o=function(r){var o=g._classNames,s=g.toggleEffect;if(h.expanded=n,p._callHook("treeStructureChanged",t,n?"expand":"collapse"),p._callHook("nodeRender",t,!1,!1,!0),h.ul)if("none"!==h.ul.style.display==!!h.expanded)h.warn("nodeSetExpanded: UL.style.display already set");else{if(s&&!v)return e(h.li).addClass(o.animating),void(i(e(h.ul)[s.effect])?e(h.ul)[s.effect]({duration:s.duration,always:function(){e(this).removeClass(o.animating),e(h.li).removeClass(o.animating),r()}}):(e(h.ul).stop(!0,!0),e(h.ul).parent().find(".ui-effects-placeholder").remove(),e(h.ul).toggle(s.effect,s.options,s.duration,function(){e(this).removeClass(o.animating),e(h.li).removeClass(o.animating),r()})));h.ul.style.display=h.expanded||!parent?"":"none"}r()},n&&h.lazy&&void 0===h.hasChildren()?h.load().done(function(){s.notifyWith&&s.notifyWith(h,["loaded"]),o(function(){s.resolveWith(h)})}).fail(function(e){o(function(){s.rejectWith(h,["load failed ("+e+")"])})}):o(function(){s.resolveWith(h)}),s.promise()},nodeSetFocus:function(t,n){var i,r=t.tree,o=t.node,s=r.options,a=!!t.originalEvent&&e(t.originalEvent.target).is(":input");if(n=!1!==n,r.focusNode){if(r.focusNode===o&&n)return;i=e.extend({},t,{node:r.focusNode}),r.focusNode=null,this._triggerNodeEvent("blur",i),this._callHook("nodeRenderStatus",i)}n&&(this.hasFocus()||(o.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),o.makeVisible({scrollIntoView:!1}),r.focusNode=o,s.titlesTabbable&&(a||e(o.span).find(".fancytree-title").focus()),s.aria&&e(r.$container).attr("aria-activedescendant",e(o.tr||o.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",t),document.activeElement===r.$container.get(0)||1<=e(document.activeElement,r.$container).length||e(r.$container).focus(),s.autoScroll&&o.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t,n){var i=e.node,r=e.tree,o=e.options,s=!0===(n=n||{}).noEvents,a=i.parent;if(t=!1!==t,!v.evalOption("unselectable",i,i,o,!1))return i._lastSelectIntent=t,!!i.selected!==t||3===o.selectMode&&i.partsel&&!t?s||!1!==this._triggerNodeEvent("beforeSelect",i,e.originalEvent)?(t&&1===o.selectMode?(r.lastSelectedNode&&r.lastSelectedNode.setSelected(!1),i.selected=t):3!==o.selectMode||!a||a.radiogroup||i.radiogroup?a&&a.radiogroup?i.visitSiblings(function(e){e._changeSelectStatusAttrs(t&&e===i)},!0):i.selected=t:(i.selected=t,i.fixSelection3AfterClick(n)),this.nodeRenderStatus(e),r.lastSelectedNode=t?i:null,void(s||r._triggerNodeEvent("select",e))):!!i.selected:t},nodeSetStatus:function(t,n,i,r){function o(n,i){var r=s.children?s.children[0]:null;return r&&r.isStatusNode()?(e.extend(r,n),r.statusNodeType=i,a._callHook("nodeRenderTitle",r)):(s._setChildren([n]),a._callHook("treeStructureChanged",t,"setStatusNode"),s.children[0].statusNodeType=i,a.render()),s.children[0]}var s=t.node,a=t.tree;switch(n){case"ok":!function(){var e=s.children?s.children[0]:null;if(e&&e.isStatusNode()){try{s.ul&&(s.ul.removeChild(e.li),e.li=null)}catch(e){}1===s.children.length?s.children=[]:s.children.shift(),a._callHook("treeStructureChanged",t,"clearStatusNode")}}(),s._isLoading=!1,s._error=null,s.renderStatus();break;case"loading":s.parent||o({title:a.options.strings.loading+(i?" ("+i+")":""),checkbox:!1,tooltip:r},n),s._isLoading=!0,s._error=null,s.renderStatus();break;case"error":o({title:a.options.strings.loadError+(i?" ("+i+")":""),checkbox:!1,tooltip:r},n),s._isLoading=!1,s._error={message:i,details:r},s.renderStatus();break;case"nodata":o({title:i||a.options.strings.noData,checkbox:!1,tooltip:r},n),s._isLoading=!1,s._error=null,s.renderStatus();break;default:e.error("invalid node status "+n)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){var t=e.node,n=!t.selected;return t.partsel&&!t.selected&&!0===t._lastSelectIntent&&(t.selected=!(n=!1)),t._lastSelectIntent=n,this.nodeSetSelected(e,n)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null,t._callHook("treeStructureChanged",e,"clear")},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("fancytree-helper-hidden")},treeInit:function(t){var n=t.tree,i=n.options;n.$container.attr("tabindex",i.tabindex),e.each(P,function(e,t){void 0!==i[t]&&(n.info("Move option "+t+" to tree"),n[t]=i[t],delete i[t])}),i.checkboxAutoHide&&n.$container.addClass("fancytree-checkbox-auto-hide"),i.rtl?n.$container.attr("DIR","RTL").addClass("fancytree-rtl"):n.$container.removeAttr("DIR").removeClass("fancytree-rtl"),i.aria&&(n.$container.attr("role","tree"),1!==i.selectMode&&n.$container.attr("aria-multiselectable",!0)),this.treeLoad(t)},treeLoad:function(n,i){var r,o,s,a=n.tree,l=n.widget.element,d=e.extend({},n,{node:this.rootNode});if(a.rootNode.children&&this.treeClear(n),i=i||this.options.source)"string"==typeof i&&e.error("Not implemented");else switch(o=l.data("type")||"html"){case"html":(s=l.find(">ul").not(".fancytree-container").first()).length?(s.addClass("ui-fancytree-source fancytree-helper-hidden"),i=e.ui.fancytree.parseHtml(s),this.data=e.extend(this.data,c(s))):(v.warn("No `source` option was passed and container does not contain `<ul>`: assuming `source: []`."),i=[]);break;case"json":i=e.parseJSON(l.text()),l.contents().filter(function(){return 3===this.nodeType}).remove(),e.isPlainObject(i)&&(t(I(i.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),i=(r=i).children,delete r.children,e.each(P,function(e,t){void 0!==r[t]&&(a[t]=r[t],delete r[t])}),e.extend(a.data,r));break;default:e.error("Invalid data-type: "+o)}return a._triggerTreeEvent("preInit",null),this.nodeLoadChildren(d,i).done(function(){a._callHook("treeStructureChanged",n,"loadChildren"),a.render(),3===n.options.selectMode&&a.rootNode.fixSelection3FromEndNodes(),a.activeNode&&a.options.activeVisible&&a.activeNode.makeVisible(),a._triggerTreeEvent("init",null,{status:!0})}).fail(function(){a.render(),a._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(e,t,n){e.tree._callHook("treeStructureChanged",e,t?"addNode":"removeNode")},treeSetFocus:function(t,n,i){var r;(n=!1!==n)!==this.hasFocus()&&(!(this._hasFocus=n)&&this.focusNode?this.focusNode.setFocus(!1):!n||i&&i.calledByNode||e(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",n),this._triggerTreeEvent(n?"focusTree":"blurTree"),n&&!this.activeNode&&(r=this._lastMousedownNode||this.getFirstChild())&&r.setFocus())},treeSetOption:function(t,n,i){var r=t.tree,o=!0,s=!1,a=!1;switch(n){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":a=s=!0;break;case"checkboxAutoHide":r.$container.toggleClass("fancytree-checkbox-auto-hide",!!i);break;case"escapeTitles":case"tooltip":a=!0;break;case"rtl":!1===i?r.$container.removeAttr("DIR").removeClass("fancytree-rtl"):r.$container.attr("DIR","RTL").addClass("fancytree-rtl"),a=!0;break;case"source":o=!1,r._callHook("treeLoad",r,i),a=!0}r.debug("set option "+n+"="+i+" <"+typeof i+">"),o&&(this.widget._super||e.Widget.prototype._setOption).call(this.widget,n,i),s&&r._callHook("treeCreate",r),a&&r.render(!0,!1)},treeStructureChanged:function(e,t){}}),e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,copyFunctionsToData:!1,debugLevel:null,disabled:!1,enableAspx:42,escapeTitles:!1,extensions:[],focusOnSelect:!1,generateIds:!1,icon:!0,idPrefix:"ft_",keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,nodata:!0,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,toggleEffect:{effect:"slideToggle",duration:200},tooltip:!1,treeId:null,_classNames:{active:"fancytree-active",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",error:"fancytree-error",expanded:"fancytree-expanded",focused:"fancytree-focused",folder:"fancytree-folder",hasChildren:"fancytree-has-children",lastsib:"fancytree-lastsib",lazy:"fancytree-lazy",loading:"fancytree-loading",node:"fancytree-node",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",selected:"fancytree-selected",statusNodePrefix:"fancytree-statusnode-",unselectable:"fancytree-unselectable"},lazyLoad:null,postProcess:null},_deprecationWarning:function(e){var t=this.tree;t&&3<=t.options.debugLevel&&t.warn("$().fancytree('"+e+"') is deprecated (see https://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree_Widget.html")},_create:function(){this.tree=new p(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul").first();for(var r,o,a=this.options,l=a.extensions,d=(this.tree,0);d<l.length;d++)o=l[d],(r=e.ui.fancytree._extensions[o])||e.error("Could not apply extension '"+o+"' (it is not registered, did you forget to include it?)"),this.tree.options[o]=function c(t){var r,o,s,a,l=t||{},d=1,u=arguments.length;if("object"==typeof l||i(l)||(l={}),d===u)throw Error("need at least two args");for(;d<u;d++)if(null!=(r=arguments[d]))for(o in r)n(r,o)&&(a=l[o],l!==(s=r[o])&&(s&&e.isPlainObject(s)?(a=a&&e.isPlainObject(a)?a:{},l[o]=c(a,s)):void 0!==s&&(l[o]=s)));return l}({},r.options,this.tree.options[o]),t(void 0===this.tree.ext[o],"Extension name must not exist as Fancytree.ext attribute: '"+o+"'"),this.tree.ext[o]={},function(t,n,i){for(var r in n)"function"==typeof n[r]?"function"==typeof t[r]?t[r]=s(r,t,0,n,i):"_"===r.charAt(0)?t.ext[i][r]=s(r,t,0,n,i):e.error("Could not override tree."+r+". Use prefix '_' to create tree."+i+"._"+r):"options"!==r&&(t.ext[i][r]=n[r])}(this.tree,r,o),0;void 0!==a.icons&&(!0===a.icon?(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),a.icon=a.icons):e.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead")),void 0!==a.iconClass&&(a.icon?e.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),a.icon=a.iconClass)),void 0!==a.tabbable&&(a.tabindex=a.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+a.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},_destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree)},_unbind:function(){var t=this.tree._ns;this.element.off(t),this.tree.$container.off(t),e(document).off(t)},_bind:function(){var t=this,n=this.options,i=this.tree,r=i._ns;this._unbind(),i.$container.on("focusin"+r+" focusout"+r,function(t){var n=v.getNode(t),r="focusin"===t.type;if(!r&&n&&e(t.target).is("a"))n.debug("Ignored focusout on embedded <a> element.");else{if(r){if(i._getExpiringValue("focusin"))return void i.debug("Ignored double focusin.");i._setExpiringValue("focusin",!0,50),n||(n=i._getExpiringValue("mouseDownNode"))&&i.debug("Reconstruct mouse target for focusin from recent event.")}n?i._callHook("nodeSetFocus",i._makeHookContext(n,t),r):i.tbody&&e(t.target).parents("table.fancytree-container > thead").length?i.debug("Ignore focus event outside table body.",t):i._callHook("treeSetFocus",i,r)}}).on("selectstart"+r,"span.fancytree-title",function(e){e.preventDefault()}).on("keydown"+r,function(e){if(n.disabled||!1===n.keyboard)return!0;var t,r=i.focusNode,o=i._makeHookContext(r||i,e),s=i.phase;try{return i.phase="userEvent","preventNav"===(t=r?i._triggerNodeEvent("keydown",r,e):i._triggerTreeEvent("keydown",e))?t=!0:!1!==t&&(t=i._callHook("nodeKeydown",o)),t}finally{i.phase=s}}).on("mousedown"+r,function(e){e=v.getEventTarget(e),i._lastMousedownNode=e?e.node:null,i._setExpiringValue("mouseDownNode",i._lastMousedownNode)}).on("click"+r+" dblclick"+r,function(e){if(n.disabled)return!0;var i,r=v.getEventTarget(e),o=r.node,s=t.tree,a=s.phase;if(!o)return!0;i=s._makeHookContext(o,e);try{switch(s.phase="userEvent",e.type){case"click":return i.targetType=r.type,o.isPagingNode()?!0===s._triggerNodeEvent("clickPaging",i,e):!1!==s._triggerNodeEvent("click",i,e)&&s._callHook("nodeClick",i);case"dblclick":return i.targetType=r.type,!1!==s._triggerNodeEvent("dblclick",i,e)&&s._callHook("nodeDblclick",i)}}finally{s.phase=a}})},getActiveNode:function(){return this._deprecationWarning("getActiveNode"),this.tree.activeNode},getNodeByKey:function(e){return this._deprecationWarning("getNodeByKey"),this.tree.getNodeByKey(e)},getRootNode:function(){return this._deprecationWarning("getRootNode"),this.tree.rootNode},getTree:function(){return this._deprecationWarning("getTree"),this.tree}}),v=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.38.2",buildType:"production",debugLevel:3,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:p,_FancytreeNodeClass:h,jquerySupports:{positionMyOfs:function(t){for(var n,i,o=e.map(r(t).split("."),function(e){return parseInt(e,10)}),s=e.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)}),a=0;a<s.length;a++)if((n=o[a]||0)!==(i=s[a]||0))return i<n;return!0}(e.ui.version,1,9)},assert:t,createTree:function(t,n){return n=e(t).fancytree(n),v.getTree(n)},debounce:function(e,t,n,i){var r;return 3===arguments.length&&"boolean"!=typeof n&&(i=n,n=!1),function(){var o=arguments;i=i||this,n&&!r&&t.apply(i,o),clearTimeout(r),r=setTimeout(function(){n||t.apply(i,o),r=null},e)}},debug:function(t){4<=e.ui.fancytree.debugLevel&&o("log",arguments)},error:function(t){1<=e.ui.fancytree.debugLevel&&o("error",arguments)},escapeHtml:function(e){return(""+e).replace(m,function(e){return C[e]})},fixPositionOptions:function(t){var n,i,r,o;return(t.offset||0<=(""+t.my+t.at).indexOf("%"))&&e.error("expected new position syntax (but '%' is not supported)"),e.ui.fancytree.jquerySupports.positionMyOfs||(n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),i=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),r=(n[2]?+n[2]:0)+(i[2]?+i[2]:0),o=(n[4]?+n[4]:0)+(i[4]?+i[4]:0),t=e.extend({},t,{my:n[1]+" "+n[3],at:i[1]+" "+i[3]}),(r||o)&&(t.offset=r+" "+o)),t},getEventTarget:function(t){var n=t&&t.target?t.target.className:"",i={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(n)?i.type="title":/\bfancytree-expander\b/.test(n)?i.type=!1===i.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(n)?i.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(n)?i.type="icon":/\bfancytree-node\b/.test(n)?i.type="title":t&&t.target&&((t=e(t.target)).is("ul[role=group]")?((i.node&&i.node.tree||v).debug("Ignoring click on outer UL."),i.node=null):t.closest(".fancytree-title").length?i.type="title":t.closest(".fancytree-checkbox").length?i.type="checkbox":t.closest(".fancytree-expander").length&&(i.type="expander")),i},getEventTargetType:function(e){return this.getEventTarget(e).type},getNode:function(t){if(t instanceof h)return t;for(t instanceof e?t=t[0]:void 0!==t.originalEvent&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var n=t;return t instanceof p?t:("number"==typeof(t=void 0===t?0:t)?t=e(".fancytree-container").eq(t):"string"==typeof t?(t=e("#ft-id-"+n).eq(0)).length||(t=e(n).eq(0)):t instanceof Element||t instanceof HTMLDocument?t=e(t):t instanceof e?t=t.eq(0):void 0!==t.originalEvent&&(t=e(t.target)),(t=(t=t.closest(":ui-fancytree")).data("ui-fancytree")||t.data("fancytree"))?t.tree:null)},evalOption:function(e,t,n,r,o){var s,a=t.tree,r=r[e],n=n[e];return i(r)?(s={node:t,tree:a,widget:a.widget,options:a.widget.options,typeInfo:a.types[t.type]||{}},null==(s=r.call(a,{type:e},s))&&(s=n)):s=null==n?r:n,s=null==s?o:s},setSpanIcon:function(t,n,i){var r=e(t);"string"==typeof i?r.attr("class",n+" "+i):(i.text?r.text(""+i.text):i.html&&(t.innerHTML=i.html),r.attr("class",n+" "+(i.addClass||"")))},eventToString:function(e){
var t=e.which,n=e.type,i=[];return e.altKey&&i.push("alt"),e.ctrlKey&&i.push("ctrl"),e.metaKey&&i.push("meta"),e.shiftKey&&i.push("shift"),"click"===n||"dblclick"===n?i.push(S[e.button]+n):"wheel"===n?i.push(n):w[t]||i.push(k[t]||String.fromCharCode(t).toLowerCase()),i.join("+")},info:function(t){3<=e.ui.fancytree.debugLevel&&o("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(t,n,i,r){var o,s=t[n]||e.noop;t[n]=function(){var e=r||this;try{return o=e._super,e._super=s,i.apply(e,arguments)}finally{e._super=o}}},parseHtml:function(t){var i,o,s,a,l,d,u,f,h=t.find(">li"),p=[];return h.each(function(){var h,g,v=e(this),y=v.find(">span",this).first(),m=y.length?null:v.find(">a").first(),b={tooltip:null,data:{}};for(y.length?b.title=y.html():m&&m.length?(b.title=m.html(),b.data.href=m.attr("href"),b.data.target=m.attr("target"),b.tooltip=m.attr("title")):(b.title=v.html(),0<=(l=b.title.search(/<ul/i))&&(b.title=b.title.substring(0,l))),b.title=r(b.title),a=0,d=E.length;a<d;a++)b[E[a]]=void 0;for(i=this.className.split(" "),s=[],a=0,d=i.length;a<d;a++)o=i[a],T[o]?b[o]=!0:s.push(o);if(b.extraClasses=s.join(" "),(u=v.attr("title"))&&(b.tooltip=u),(u=v.attr("id"))&&(b.key=u),v.attr("hideCheckbox")&&(b.checkbox=!1),(h=c(v))&&!e.isEmptyObject(h)){for(g in j)n(h,g)&&(h[j[g]]=h[g],delete h[g]);for(a=0,d=A.length;a<d;a++)u=A[a],null!=(f=h[u])&&(delete h[u],b[u]=f);e.extend(b.data,h)}(t=v.find(">ul").first()).length?b.children=e.ui.fancytree.parseHtml(t):b.children=b.lazy?void 0:null,p.push(b)}),p},registerExtension:function(n){t(null!=n.name,"extensions must have a `name` property."),t(null!=n.version,"extensions must have a `version` property."),e.ui.fancytree._extensions[n.name]=n},trim:r,unescapeHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},warn:function(t){2<=e.ui.fancytree.debugLevel&&o("warn",arguments)}}),e.ui.fancytree}e.ui.fancytree.warn("Fancytree: ignored duplicate include")}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";return e.ui.fancytree._FancytreeClass.prototype.countSelected=function(e){return this.options,this.getSelectedNodes(e).length},e.ui.fancytree._FancytreeNodeClass.prototype.updateCounters=function(){var t=this,n=e("span.fancytree-childcounter",t.span),i=t.tree.options.childcounter,r=t.countChildren(i.deep);!(t.data.childCounter=r)&&i.hideZeros||t.isExpanded()&&i.hideExpanded?n.remove():(n=n.length?n:e("<span class='fancytree-childcounter'/>").appendTo(e("span.fancytree-icon,span.fancytree-custom-icon",t.span))).text(r),!i.deep||t.isTopLevel()||t.isRootNode()||t.parent.updateCounters()},e.ui.fancytree.prototype.widgetMethod1=function(e){return this.tree,e},e.ui.fancytree.registerExtension({name:"childcounter",version:"2.38.2",options:{deep:!0,hideZeros:!0,hideExpanded:!1},foo:42,_appendCounter:function(e){},treeInit:function(e){e.options,e.options.childcounter,this._superApply(arguments),this.$container.addClass("fancytree-ext-childcounter")},treeDestroy:function(e){this._superApply(arguments)},nodeRenderTitle:function(t,n){var i=t.node,r=t.options.childcounter,o=null==i.data.childCounter?i.countChildren(r.deep):+i.data.childCounter;this._super(t,n),!o&&r.hideZeros||i.isExpanded()&&r.hideExpanded||e("span.fancytree-icon,span.fancytree-custom-icon",i.span).append(e("<span class='fancytree-childcounter'/>").text(o))},nodeSetExpanded:function(e,t,n){var i=e.tree;return e.node,this._superApply(arguments).always(function(){i.nodeRenderTitle(e)})}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(e,t,n){for(var i,r,o=3&e.length,s=e.length-o,a=n,l=3432918353,d=461845907,c=0;c<s;)r=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,a=27492+(65535&(i=5*(65535&(a=(a^=r=(65535&(r=(r=(65535&r)*l+(((r>>>16)*l&65535)<<16)&4294967295)<<15|r>>>17))*d+(((r>>>16)*d&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(r=0,o){case 3:r^=(255&e.charCodeAt(c+2))<<16;case 2:r^=(255&e.charCodeAt(c+1))<<8;case 1:a^=r=(65535&(r=(r=(65535&(r^=255&e.charCodeAt(c)))*l+(((r>>>16)*l&65535)<<16)&4294967295)<<15|r>>>17))*d+(((r>>>16)*d&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,a^=a>>>16,t?("0000000"+(a>>>0).toString(16)).substr(-8):a>>>0}var n=e.ui.fancytree.assert;return e.ui.fancytree._FancytreeNodeClass.prototype.getCloneList=function(t){var n,i=this.tree,r=i.refMap[this.refKey]||null,o=i.keyMap;return r&&(n=this.key,t?r=e.map(r,function(e){return o[e]}):(r=e.map(r,function(e){return e===n?null:o[e]})).length<1&&(r=null)),r},e.ui.fancytree._FancytreeNodeClass.prototype.isClone=function(){var e=this.refKey||null,e=e&&this.tree.refMap[e]||null;return!!(e&&1<e.length)},e.ui.fancytree._FancytreeNodeClass.prototype.reRegister=function(t,n){n=null==n?null:""+n;var i=this.tree,r=this.key,o=this.refKey,s=i.keyMap,a=i.refMap,l=a[o]||null,i=!1;return null!=(t=null==t?null:""+t)&&t!==this.key&&(s[t]&&e.error("[ext-clones] reRegister("+t+"): already exists: "+this),delete s[r],s[t]=this,l&&(a[o]=e.map(l,function(e){return e===r?t:e})),this.key=t,i=!0),null!=n&&n!==this.refKey&&(l&&(1===l.length?delete a[o]:a[o]=e.map(l,function(e){return e===r?null:e})),a[n]?a[n].append(t):a[n]=[this.key],this.refKey=n,i=!0),i},e.ui.fancytree._FancytreeNodeClass.prototype.setRefKey=function(e){return this.reRegister(null,e)},e.ui.fancytree._FancytreeClass.prototype.getNodesByRef=function(t,n){var i=this.keyMap,t=this.refMap[t]||null;return t=t&&(t=n?e.map(t,function(e){return e=i[e],e.isDescendantOf(n)?e:null}):e.map(t,function(e){return i[e]})).length<1?null:t},e.ui.fancytree._FancytreeClass.prototype.changeRefKey=function(e,t){var n,i=this.keyMap,r=this.refMap[e]||null;if(r){for(n=0;n<r.length;n++)i[r[n]].refKey=t;delete this.refMap[e],this.refMap[t]=r}},e.ui.fancytree.registerExtension({name:"clones",version:"2.38.2",options:{highlightActiveClones:!0,highlightClones:!1},treeCreate:function(e){this._superApply(arguments),e.tree.refMap={},e.tree.keyMap={}},treeInit:function(i){this.$container.addClass("fancytree-ext-clones"),n(null==i.options.defaultKey),i.options.defaultKey=function(n){return i=n,"id_"+(i=t(n=(n=e.map(n.getParentList(!1,!0),function(e){return e.refKey||e.key})).join("/"),!0))+t(i+n,!0);var i},this._superApply(arguments)},treeClear:function(e){return e.tree.refMap={},e.tree.keyMap={},this._superApply(arguments)},treeRegisterNode:function(t,i,r){var o,s,a=t.tree,l=a.keyMap,d=a.refMap,c=r.key,u=r&&null!=r.refKey?""+r.refKey:null;return r.isStatusNode()||(i?(null!=l[r.key]&&(s=l[r.key],s="clones.treeRegisterNode: duplicate key '"+r.key+"': /"+r.getPath(!0)+" => "+s.getPath(!0),a.error(s),e.error(s)),l[c]=r,u&&((o=d[u])?(o.push(c),2===o.length&&t.options.clones.highlightClones&&l[o[0]].renderStatus()):d[u]=[c])):(null==l[c]&&e.error("clones.treeRegisterNode: node.key not registered: "+r.key),delete l[c],u&&(o=d[u])&&((s=o.length)<=1?(n(1===s),n(o[0]===c),delete d[u]):(function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1)}(o,c),2===s&&t.options.clones.highlightClones&&l[o[0]].renderStatus())))),this._super(t,i,r)},nodeRenderStatus:function(t){var n,i=t.node,r=this._super(t);return t.options.clones.highlightClones&&(n=e(i[t.tree.statusClassPropName])).length&&i.isClone()&&n.addClass("fancytree-clone"),r},nodeSetActive:function(t,n,i){var r=t.tree.statusClassPropName,o=t.node,s=this._superApply(arguments);return t.options.clones.highlightActiveClones&&o.isClone()&&e.each(o.getCloneList(!0),function(t,i){e(i[r]).toggleClass("fancytree-active-clone",!1!==n)}),s}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(e){return 0===e?"":0<e?"+"+e:""+e}function n(t){var n=t.options.dnd||null,r=t.options.glyph||null;n&&(i||(e.ui.plugin.add("draggable","connectToFancytree",{start:function(t,n){var i=e(this).data("ui-draggable")||e(this).data("draggable"),r=n.helper.data("ftSourceNode")||null;if(r)return i.offset.click.top=-2,i.offset.click.left=16,r.tree.ext.dnd._onDragEvent("start",r,null,t,n,i)},drag:function(t,n){var i,r=e(this).data("ui-draggable")||e(this).data("draggable"),o=n.helper.data("ftSourceNode")||null,s=n.helper.data("ftTargetNode")||null,a=e.ui.fancytree.getNode(t.target),l=o&&o.tree.options.dnd;t.target&&!a&&0<e(t.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length?(o||s||e.ui.fancytree).debug("Drag event over helper: ignored."):(n.helper.data("ftTargetNode",a),l&&l.updateHelper&&(i=o.tree._makeHookContext(o,t,{otherNode:a,ui:n,draggable:r,dropMarker:e("#fancytree-drop-marker")}),l.updateHelper.call(o.tree,o,i)),s&&s!==a&&s.tree.ext.dnd._onDragEvent("leave",s,o,t,n,r),a&&a.tree.options.dnd.dragDrop&&(a===s||a.tree.ext.dnd._onDragEvent("enter",a,o,t,n,r),a.tree.ext.dnd._onDragEvent("over",a,o,t,n,r)))},stop:function(t,n){var i=e(this).data("ui-draggable")||e(this).data("draggable"),r=n.helper.data("ftSourceNode")||null,o=n.helper.data("ftTargetNode")||null,s="mouseup"===t.type&&1===t.which;s||(r||o||e.ui.fancytree).debug("Drag was cancelled"),o&&(s&&o.tree.ext.dnd._onDragEvent("drop",o,r,t,n,i),o.tree.ext.dnd._onDragEvent("leave",o,r,t,n,i)),r&&r.tree.ext.dnd._onDragEvent("stop",r,null,t,n,i)}}),i=!0)),n&&n.dragStart&&t.widget.element.draggable(e.extend({addClasses:!1,appendTo:t.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(t){var n,i,o=e.ui.fancytree.getNode(t.target);return o?(i=o.tree.options.dnd,n=e(o.span),(n=e("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(n.find("span.fancytree-title").clone())).data("ftSourceNode",o),r&&n.find(".fancytree-drag-helper-img").addClass(r.map._addClass+" "+r.map.dragHelper),i.initHelper&&i.initHelper.call(o.tree,o,{node:o,tree:o.tree,originalEvent:t,ui:{helper:n}}),n):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(e,t){return!!t.helper.data("ftSourceNode")}},t.options.dnd.draggable)),n&&n.dragDrop&&t.widget.element.droppable(e.extend({addClasses:!1,tolerance:"intersect",greedy:!1},t.options.dnd.droppable))}var i=!1,r="fancytree-drop-accept",o="fancytree-drop-after",s="fancytree-drop-before",a="fancytree-drop-reject";return e.ui.fancytree.registerExtension({name:"dnd",version:"2.38.2",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dropMarkerOffsetX:-24,dropMarkerInsertOffsetX:-16,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(t){var i=t.tree;this._superApply(arguments),i.options.dnd.dragStart&&i.$container.on("mousedown",function(n){var i;t.options.dnd.focusOnClick&&((i=e.ui.fancytree.getNode(n))&&i.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){e(n.target).closest(":tabbable").focus()},10))}),n(i)},_setDndStatus:function(n,i,l,d,c){var u,f="center",h=this._local,p=this.options.dnd,g=this.options.glyph,v=n?e(n.span):null,n=e(i.span),i=n.find("span.fancytree-title");if(h.$dropMarker||(h.$dropMarker=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(e(this.$div).parent()),g&&h.$dropMarker.addClass(g.map._addClass+" "+g.map.dropMarker)),"after"===d||"before"===d||"over"===d){switch(u=p.dropMarkerOffsetX||0,d){case"before":f="top",u+=p.dropMarkerInsertOffsetX||0;break;case"after":f="bottom",u+=p.dropMarkerInsertOffsetX||0}i={my:"left"+t(u)+" center",at:"left "+f,of:i},this.options.rtl&&(i.my="right"+t(-u)+" center",i.at="right "+f),h.$dropMarker.toggleClass(o,"after"===d).toggleClass("fancytree-drop-over","over"===d).toggleClass(s,"before"===d).toggleClass("fancytree-rtl",!!this.options.rtl).show().position(e.ui.fancytree.fixPositionOptions(i))}else h.$dropMarker.hide();v&&v.toggleClass(r,!0===c).toggleClass(a,!1===c),n.toggleClass("fancytree-drop-target","after"===d||"before"===d||"over"===d).toggleClass(o,"after"===d).toggleClass(s,"before"===d).toggleClass(r,!0===c).toggleClass(a,!1===c),l.toggleClass(r,!0===c).toggleClass(a,!1===c)},_onDragEvent:function(t,n,i,r,o,s){var a,l,d,c,u=this.options.dnd,f=this._makeHookContext(n,r,{otherNode:i,ui:o,draggable:s}),h=null,p=this,g=e(n.span);switch(u.smartRevert&&(s.options.revert="invalid"),t){case"start":n.isStatusNode()?h=!1:u.dragStart&&(h=u.dragStart(n,f)),!1===h?(this.debug("tree.dragStart() cancelled"),o.helper.trigger("mouseup").hide()):(u.smartRevert&&(a=n[f.tree.nodeContainerAttrName].getBoundingClientRect(),l=e(s.options.appendTo)[0].getBoundingClientRect(),s.originalPosition.left=Math.max(0,a.left-l.left),s.originalPosition.top=Math.max(0,a.top-l.top)),g.addClass("fancytree-drag-source"),e(document).on("keydown.fancytree-dnd,mousedown.fancytree-dnd",function(t){("keydown"===t.type&&t.which===e.ui.keyCode.ESCAPE||"mousedown"===t.type)&&p.ext.dnd._cancelDrag()}));break;case"enter":h=!!(c=(!u.preventRecursiveMoves||!n.isDescendantOf(i))&&(u.dragEnter?u.dragEnter(n,f):null))&&(Array.isArray(c)?{over:0<=e.inArray("over",c),before:0<=e.inArray("before",c),after:0<=e.inArray("after",c)}:{over:!0===c||"over"===c,before:!0===c||"before"===c,after:!0===c||"after"===c}),o.helper.data("enterResponse",h);break;case"over":d=null,!1===(l=o.helper.data("enterResponse"))||("string"==typeof l?d=l:(c=g.offset(),c={x:(c={x:r.pageX-c.left,y:r.pageY-c.top}).x/g.width(),y:c.y/g.height()},l.after&&.75<c.y||!l.over&&l.after&&.5<c.y?d="after":l.before&&c.y<=.25||!l.over&&l.before&&c.y<=.5?d="before":l.over&&(d="over"),u.preventVoidMoves&&(n===i?(this.debug("    drop over source node prevented"),d=null):"before"===d&&i&&n===i.getNextSibling()?(this.debug("    drop after source node prevented"),d=null):"after"===d&&i&&n===i.getPrevSibling()?(this.debug("    drop before source node prevented"),d=null):"over"===d&&i&&i.parent===n&&i.isLastSibling()&&(this.debug("    drop last child over own parent prevented"),d=null)),o.helper.data("hitMode",d))),"before"===d||"after"===d||!u.autoExpandMS||!1===n.hasChildren()||n.expanded||u.dragExpand&&!1===u.dragExpand(n,f)||n.scheduleAction("expand",u.autoExpandMS),d&&u.dragOver&&(f.hitMode=d,h=u.dragOver(n,f)),l=!1!==h&&null!==d,u.smartRevert&&(s.options.revert=!l),this._local._setDndStatus(i,n,o.helper,d,l);break;case"drop":(d=o.helper.data("hitMode"))&&u.dragDrop&&(f.hitMode=d,u.dragDrop(n,f));break;case"leave":n.scheduleAction("cancel"),o.helper.data("enterResponse",null),o.helper.data("hitMode",null),this._local._setDndStatus(i,n,o.helper,"out",void 0),u.dragLeave&&u.dragLeave(n,f);break;case"stop":g.removeClass("fancytree-drag-source"),e(document).off(".fancytree-dnd"),u.dragStop&&u.dragStop(n,f);break;default:e.error("Unsupported drag event: "+t)}return h},_cancelDrag:function(){var t=e.ui.ddmanager.current;t&&t.cancel()}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(){C=_=N=E=S=P=k=null,w&&w.removeClass(u+" "+f),w=null,x&&x.hide(),l&&(l.remove(),l=null)}function n(e){return 0===e?"":0<e?"+"+e:""+e}function i(e,t){var n,i=t.tree,r=t.dataTransfer;"dragstart"===e.type?(t.effectAllowed=i.options.dnd5.effectAllowed,t.dropEffect=i.options.dnd5.dropEffectDefault):(t.effectAllowed=E,t.dropEffect=S),t.dropEffectSuggested=(n=e,i=(e=i).options.dnd5.dropEffectDefault,c?n.metaKey&&n.altKey||n.ctrlKey?i="link":n.metaKey?i="move":n.altKey&&(i="copy"):n.ctrlKey?i="copy":n.shiftKey?i="move":n.altKey&&(i="link"),i!==N&&e.info("evalEffectModifiers: "+n.type+" - evalEffectModifiers(): "+N+" -> "+i),N=i),t.isMove="move"===t.dropEffect,t.files=r.files||[]}function r(e,t,n){var i=t.tree,r=t.dataTransfer;return"dragstart"!==e.type&&E!==t.effectAllowed&&i.warn("effectAllowed should only be changed in dragstart event: "+e.type+": data.effectAllowed changed from "+E+" -> "+t.effectAllowed),!1===n&&(i.info("applyDropEffectCallback: allowDrop === false"),t.effectAllowed="none",t.dropEffect="none"),t.isMove="move"===t.dropEffect,"dragstart"===e.type&&(E=t.effectAllowed,S=t.dropEffect),r.effectAllowed=E,r.dropEffect=S}function o(t,o){if(o.options.dnd5.scroll&&(N=o.tree,u=t,l=N.options.dnd5,c=N.$scrollParent[0],b=l.scrollSensitivity,w=l.scrollSpeed,a=0,c!==document&&"HTML"!==c.tagName?(l=N.$scrollParent.offset(),_=c.scrollTop,l.top+c.offsetHeight-u.pageY<b?0<c.scrollHeight-N.$scrollParent.innerHeight()-_&&(c.scrollTop=a=_+w):0<_&&u.pageY-l.top<b&&(c.scrollTop=a=_-w)):0<(_=e(document).scrollTop())&&u.pageY-_<b?(a=_-w,e(document).scrollTop(a)):e(window).height()-(u.pageY-_)<b&&(a=_+w,e(document).scrollTop(a)),a&&N.debug("autoScroll: "+a+"px")),!o.node)return o.tree.warn("Ignored dragover for non-node"),T;var s,a,l=null,c=o.tree,u=c.options,f=u.dnd5,b=o.node,_=o.otherNode,C="center",w=e(b.span),N=w.find("span.fancytree-title");if(!1===k)return c.debug("Ignored dragover, since dragenter returned false."),!1;if("string"==typeof k&&e.error("assert failed: dragenter returned string"),a=w.offset(),w=(t.pageY-a.top)/w.height(),void 0===t.pageY&&c.warn("event.pageY is undefined: see issue #1013."),k.after&&.75<w||!k.over&&k.after&&.5<w?l="after":k.before&&w<=.25||!k.over&&k.before&&w<=.5?l="before":k.over&&(l="over"),f.preventVoidMoves&&"move"===o.dropEffect&&(b===_?(b.debug("Drop over source node prevented."),l=null):"before"===l&&_&&b===_.getNextSibling()?(b.debug("Drop after source node prevented."),l=null):"after"===l&&_&&b===_.getPrevSibling()?(b.debug("Drop before source node prevented."),l=null):"over"===l&&_&&_.parent===b&&_.isLastSibling()&&(b.debug("Drop last child over own parent prevented."),l=null)),(o.hitMode=l)&&f.dragOver&&(i(t,o),f.dragOver(b,o),r(t,o,!!l),l=o.hitMode),"after"===(T=l)||"before"===l||"over"===l){switch(s=f.dropMarkerOffsetX||0,l){case"before":C="top",s+=f.dropMarkerInsertOffsetX||0;break;case"after":C="bottom",s+=f.dropMarkerInsertOffsetX||0}N={my:"left"+n(s)+" center",at:"left "+C,of:N},u.rtl&&(N.my="right"+n(-s)+" center",N.at="right "+C),x.toggleClass(p,"after"===l).toggleClass(v,"over"===l).toggleClass(g,"before"===l).show().position(d.fixPositionOptions(N))}else x.hide();return e(b.span).toggleClass(m,"after"===l||"before"===l||"over"===l).toggleClass(p,"after"===l).toggleClass(g,"before"===l).toggleClass(h,"over"===l).toggleClass(y,!1===l),l}function s(n){var s,a=this,l=a.options.dnd5,c=null,u=d.getNode(n),f=n.dataTransfer||n.originalEvent.dataTransfer,p={tree:a,node:u,options:a.options,originalEvent:n.originalEvent,widget:a.widget,hitMode:k,dataTransfer:f,otherNode:_||null,otherNodeList:C||null,otherNodeData:null,useDefaultImage:!0,dropEffect:void 0,dropEffectSuggested:void 0,effectAllowed:void 0,files:null,isCancelled:void 0,isMove:void 0};switch(n.type){case"dragenter":if(P=null,!u){a.debug("Ignore non-node "+n.type+": "+n.target.tagName+"."+n.target.className),k=!1;break}if(e(u.span).addClass(v).removeClass(h+" "+y),s=0<=e.inArray(b,f.types),l.preventNonNodes&&!s){u.debug("Reject dropping a non-node."),k=!1;break}if(l.preventForeignNodes&&(!_||_.tree!==u.tree)){u.debug("Reject dropping a foreign node."),k=!1;break}if(l.preventSameParent&&p.otherNode&&p.otherNode.tree===u.tree&&u.parent===p.otherNode.parent){u.debug("Reject dropping as sibling (same parent)."),k=!1;break}if(l.preventRecursion&&p.otherNode&&p.otherNode.tree===u.tree&&u.isDescendantOf(p.otherNode)){u.debug("Reject dropping below own ancestor."),k=!1;break}if(l.preventLazyParents&&!u.isLoaded()){u.warn("Drop over unloaded target node prevented."),k=!1;break}x.show(),i(n,p),s=l.dragEnter(u,p),s=!!(s=s)&&(s=e.isPlainObject(s)?{over:!!s.over,before:!!s.before,after:!!s.after}:Array.isArray(s)?{over:0<=e.inArray("over",s),before:0<=e.inArray("before",s),after:0<=e.inArray("after",s)}:{over:!0===s||"over"===s,before:!0===s||"before"===s,after:!0===s||"after"===s},0!==Object.keys(s).length&&s),r(n,p,c=(k=s)&&(s.over||s.before||s.after));break;case"dragover":if(!u){a.debug("Ignore non-node "+n.type+": "+n.target.tagName+"."+n.target.className);break}i(n,p),c=!!(T=o(n,p)),"over"!==T&&!1!==T||u.expanded||!1===u.hasChildren()?P=null:P?!(l.autoExpandMS&&Date.now()-P>l.autoExpandMS)||u.isLoading()||l.dragExpand&&!1===l.dragExpand(u,p)||u.setExpanded():P=Date.now();break;case"dragleave":if(!u){a.debug("Ignore non-node "+n.type+": "+n.target.tagName+"."+n.target.className);break}if(!e(u.span).hasClass(v)){u.debug("Ignore dragleave (multi).");break}e(u.span).removeClass(v+" "+h+" "+y),u.scheduleAction("cancel"),l.dragLeave(u,p),x.hide();break;case"drop":if(0<=e.inArray(b,f.types)&&(m=f.getData(b),a.info(n.type+": getData('application/x-fancytree-node'): '"+m+"'")),m||(m=f.getData("text"),a.info(n.type+": getData('text'): '"+m+"'")),m)try{void 0!==(g=JSON.parse(m)).title&&(p.otherNodeData=g)}catch(n){}a.debug(n.type+": nodeData: '"+m+"', otherNodeData: ",p.otherNodeData),e(u.span).removeClass(v+" "+h+" "+y),p.hitMode=T,i(n,p),p.isCancelled=!T;var g=_&&_.span,m=_&&_.tree;l.dragDrop(u,p),n.preventDefault(),g&&!document.body.contains(g)&&(m===a?(a.debug("Drop handler removed source element: generating dragEnd."),l.dragEnd(_,p)):a.warn("Drop handler removed source element: dragend event may be lost.")),t()}if(c)return n.preventDefault(),!1}var a,l,d=e.ui.fancytree,c=/Mac/.test(navigator.platform),u="fancytree-drag-source",f="fancytree-drag-remove",h="fancytree-drop-accept",p="fancytree-drop-after",g="fancytree-drop-before",v="fancytree-drop-over",y="fancytree-drop-reject",m="fancytree-drop-target",b="application/x-fancytree-node",x=null,_=null,C=null,w=null,k=null,N=null,S=null,E=null,T=null,P=null;return e.ui.fancytree.getDragNodeList=function(){return C||[]},e.ui.fancytree.getDragNode=function(){return _},e.ui.fancytree.registerExtension({name:"dnd5",version:"2.38.2",options:{autoExpandMS:1500,dropMarkerInsertOffsetX:-16,dropMarkerOffsetX:-24,dropMarkerParent:"body",multiSource:!1,effectAllowed:"all",dropEffectDefault:"move",preventForeignNodes:!1,preventLazyParents:!0,preventNonNodes:!1,preventRecursion:!0,preventSameParent:!1,preventVoidMoves:!0,scroll:!0,scrollSensitivity:20,scrollSpeed:5,setTextTypeJson:!1,sourceCopyHook:null,dragStart:null,dragDrag:e.noop,dragEnd:e.noop,dragEnter:null,dragOver:e.noop,dragExpand:e.noop,dragDrop:e.noop,dragLeave:e.noop},treeInit:function(n){var o=n.tree,c=n.options,h=c.glyph||null,p=c.dnd5;0<=e.inArray("dnd",c.extensions)&&e.error("Extensions 'dnd' and 'dnd5' are mutually exclusive."),p.dragStop&&e.error("dragStop is not used by ext-dnd5. Use dragEnd instead."),null!=p.preventRecursiveMoves&&e.error("preventRecursiveMoves was renamed to preventRecursion."),p.dragStart&&d.overrideMethod(n.options,"createNode",function(e,t){this._super.apply(this,arguments),t.node.span?t.node.span.draggable=!0:t.node.warn("Cannot add `draggable`: no span tag")}),this._superApply(arguments),this.$container.addClass("fancytree-ext-dnd5"),n=e("<span>").appendTo(this.$container),this.$scrollParent=n.scrollParent(),n.remove(),(x=e("#fancytree-drop-marker")).length||(x=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3,"pointer-events":"none"}).prependTo(p.dropMarkerParent),h&&d.setSpanIcon(x[0],h.map._addClass,h.map.dropMarker)),x.toggleClass("fancytree-rtl",!!c.rtl),p.dragStart&&o.$container.on("dragstart drag dragend",function(n){var o=this,s=o.options.dnd5,c=d.getNode(n),h=n.dataTransfer||n.originalEvent.dataTransfer,p={tree:o,node:c,options:o.options,originalEvent:n.originalEvent,widget:o.widget,dataTransfer:h,useDefaultImage:!0,dropEffect:void 0,dropEffectSuggested:void 0,effectAllowed:void 0,files:void 0,isCancelled:void 0,isMove:void 0};switch(n.type){case"dragstart":if(!c)return o.info("Ignored dragstart on a non-node."),!1;_=c,C=!1===s.multiSource?[c]:!0===s.multiSource?c.isSelected()?o.getSelectedNodes():[c]:s.multiSource(c,p),(w=e(e.map(C,function(e){return e.span}))).addClass(u);var g=c.toDict(!0,s.sourceCopyHook);g.treeId=c.tree._id,g=JSON.stringify(g);try{h.setData(b,g),h.setData("text/html",e(c.span).html()),h.setData("text/plain",c.title)}catch(n){o.warn("Could not set data (IE only accepts 'text') - "+n)}return s.setTextTypeJson?h.setData("text",g):h.setData("text",c.title),i(n,p),!1===s.dragStart(c,p)?(t(),!1):(r(n,p),l=null,p.useDefaultImage&&(a=e(c.span).find(".fancytree-title"),C&&1<C.length&&(l=e("<span class='fancytree-childcounter'/>").text("+"+(C.length-1)).appendTo(a)),h.setDragImage&&h.setDragImage(a[0],-10,-10)),!0);case"drag":i(n,p),s.dragDrag(c,p),r(n,p),w.toggleClass(f,p.isMove);break;case"dragend":i(n,p),t(),p.isCancelled=!T,s.dragEnd(c,p,!T)}}.bind(o)),p.dragEnter&&o.$container.on("dragenter dragover dragleave drop",s.bind(o))}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";var t=/Mac/.test(navigator.platform),n=e.ui.fancytree.escapeHtml,i=e.ui.fancytree.trim,r=e.ui.fancytree.unescapeHtml;return e.ui.fancytree._FancytreeNodeClass.prototype.editStart=function(){var t,n=this,i=this.tree,o=i.ext.edit,s=i.options.edit,a=e(".fancytree-title",n.span),l={node:n,tree:i,options:i.options,isNew:e(n[i.statusClassPropName]).hasClass("fancytree-edit-new"),orgTitle:n.title,input:null,dirty:!1};return!1!==s.beforeEdit.call(n,{type:"beforeEdit"},l)&&(e.ui.fancytree.assert(!o.currentNode,"recursive edit"),o.currentNode=this,o.eventData=l,i.widget._unbind(),o.lastDraggableAttrValue=n.span.draggable,o.lastDraggableAttrValue&&(n.span.draggable=!1),e(document).on("mousedown.fancytree-edit",function(t){e(t.target).hasClass("fancytree-edit-input")||n.editEnd(!0,t)}),t=e("<input />",{"class":"fancytree-edit-input",type:"text",value:i.options.escapeTitles?l.orgTitle:r(l.orgTitle)}),o.eventData.input=t,null!=s.adjustWidthOfs&&t.width(a.width()+s.adjustWidthOfs),null!=s.inputCss&&t.css(s.inputCss),a.html(t),t.focus().change(function(e){t.addClass("fancytree-edit-dirty")}).on("keydown",function(t){switch(t.which){case e.ui.keyCode.ESCAPE:n.editEnd(!1,t);break;case e.ui.keyCode.ENTER:return n.editEnd(!0,t),!1}t.stopPropagation()}).blur(function(e){return n.editEnd(!0,e)}),s.edit.call(n,{type:"edit"},l),void 0)},e.ui.fancytree._FancytreeNodeClass.prototype.editEnd=function(t,r){var o,s=this,a=this.tree,l=a.ext.edit,d=l.eventData,c=a.options.edit,u=e(".fancytree-title",s.span).find("input.fancytree-edit-input");return c.trim&&u.val(i(u.val())),o=u.val(),d.dirty=o!==s.title,d.originalEvent=r,!1===t?d.save=!1:d.isNew?d.save=""!==o:d.save=d.dirty&&""!==o,!(!1===c.beforeClose.call(s,{type:"beforeClose"},d)||d.save&&!1===c.save.call(s,{type:"save"},d)||(u.removeClass("fancytree-edit-dirty").off(),e(document).off(".fancytree-edit"),d.save?(s.setTitle(a.options.escapeTitles?o:n(o)),s.setFocus()):d.isNew?(s.remove(),s=d.node=null,l.relatedNode.setFocus()):(s.renderTitle(),s.setFocus()),l.eventData=null,l.currentNode=null,l.relatedNode=null,a.widget._bind(),s&&l.lastDraggableAttrValue&&(s.span.draggable=!0),a.$container.get(0).focus({preventScroll:!0}),d.input=null,c.close.call(s,{type:"close"},d),0))},e.ui.fancytree._FancytreeNodeClass.prototype.editCreateNode=function(t,n){var i,r=this.tree,o=this;t=t||"child",null==n?n={title:""}:"string"==typeof n?n={title:n}:e.ui.fancytree.assert(e.isPlainObject(n)),"child"!==t||this.isExpanded()||!1===this.hasChildren()?((i=this.addNode(n,t)).match=!0,e(i[r.statusClassPropName]).removeClass("fancytree-hide").addClass("fancytree-match"),i.makeVisible().done(function(){e(i[r.statusClassPropName]).addClass("fancytree-edit-new"),o.tree.ext.edit.relatedNode=o,i.editStart()})):this.setExpanded().done(function(){o.editCreateNode(t,n)})},e.ui.fancytree._FancytreeClass.prototype.isEditing=function(){return this.ext.edit?this.ext.edit.currentNode:null},e.ui.fancytree._FancytreeNodeClass.prototype.isEditing=function(){return!!this.tree.ext.edit&&this.tree.ext.edit.currentNode===this},e.ui.fancytree.registerExtension({name:"edit",version:"2.38.2",options:{adjustWidthOfs:4,allowEmpty:!1,inputCss:{minWidth:"3em"},triggerStart:["f2","mac+enter","shift+click"],trim:!0,beforeClose:e.noop,beforeEdit:e.noop,close:e.noop,edit:e.noop,save:e.noop},currentNode:null,treeInit:function(e){var t=e.tree;this._superApply(arguments),this.$container.addClass("fancytree-ext-edit").on("fancytreebeforeupdateviewport",function(e,n){var i=t.isEditing();i&&(i.info("Cancel edit due to scroll event."),i.editEnd(!1,e))})},nodeClick:function(t){var n=e.ui.fancytree.eventToString(t.originalEvent),i=t.options.edit.triggerStart;return"shift+click"===n&&0<=e.inArray("shift+click",i)&&t.originalEvent.shiftKey||"click"===n&&0<=e.inArray("clickActive",i)&&t.node.isActive()&&!t.node.isEditing()&&e(t.originalEvent.target).hasClass("fancytree-title")?(t.node.editStart(),!1):this._superApply(arguments)},nodeDblclick:function(t){return 0<=e.inArray("dblclick",t.options.edit.triggerStart)?(t.node.editStart(),!1):this._superApply(arguments)},nodeKeydown:function(n){switch(n.originalEvent.which){case 113:if(0<=e.inArray("f2",n.options.edit.triggerStart))return n.node.editStart(),!1;break;case e.ui.keyCode.ENTER:if(0<=e.inArray("mac+enter",n.options.edit.triggerStart)&&t)return n.node.editStart(),!1}return this._superApply(arguments)}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function n(e,t,n){for(var i=[],r=1;r<t.length;r++){var o=t[r].length+(1===r?0:1)+(i[i.length-1]||0);i.push(o)}var s=e.split("");return n?i.forEach(function(e){s[e]=""+s[e]+""}):i.forEach(function(e){s[e]="<mark>"+s[e]+"</mark>"}),s.join("")}var i="__not_found__",r=e.ui.fancytree.escapeHtml;return e.ui.fancytree._FancytreeClass.prototype._applyFilterImpl=function(o,s,a){var l,d,c,u,f,h,p=0,g=this.options,v=g.escapeTitles,y=g.autoCollapse,m=e.extend({},g.filter,a),b="hide"===m.mode,x=!!m.leavesOnly&&!s;if("string"==typeof o){if(""===o)return this.warn("Fancytree passing an empty string as a filter is handled as clearFilter()."),void this.clearFilter();l=m.fuzzy?o.split("").map(t).reduce(function(e,t){return e+"([^"+t+"]*)"+t},""):t(o),d=new RegExp(l,"i"),c=new RegExp(t(o),"gi"),v&&(u=new RegExp(t(""),"g"),f=new RegExp(t(""),"g")),o=function(t){if(!t.title)return!1;var i,o=v?t.title:0<=(i=t.title).indexOf(">")?e("<div/>").html(i).text():i,i=o.match(d);return i&&m.highlight&&(v?(h=m.fuzzy?n(o,i,v):o.replace(c,function(e){return""+e+""}),t.titleWithHighlight=r(h).replace(u,"<mark>").replace(f,"</mark>")):m.fuzzy?t.titleWithHighlight=n(o,i):t.titleWithHighlight=o.replace(c,function(e){return"<mark>"+e+"</mark>"})),!!i}}return this.enableFilter=!0,
this.lastFilterArgs=arguments,a=this.enableUpdate(!1),this.$div.addClass("fancytree-ext-filter"),b?this.$div.addClass("fancytree-ext-filter-hide"):this.$div.addClass("fancytree-ext-filter-dimm"),this.$div.toggleClass("fancytree-ext-filter-hide-expanders",!!m.hideExpanders),this.rootNode.subMatchCount=0,this.visit(function(e){delete e.match,delete e.titleWithHighlight,e.subMatchCount=0}),(l=this.getRootNode()._findDirectChild(i))&&l.remove(),g.autoCollapse=!1,this.visit(function(e){if(!x||null==e.children){var t=o(e),n=!1;if("skip"===t)return e.visit(function(e){e.match=!1},!0),"skip";t||!s&&"branch"!==t||!e.parent.match||(n=t=!0),t&&(p++,e.match=!0,e.visitParents(function(t){t!==e&&(t.subMatchCount+=1),!m.autoExpand||n||t.expanded||(t.setExpanded(!0,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),t._filterAutoExpanded=!0)},!0))}}),g.autoCollapse=y,0===p&&m.nodata&&b&&(!0===(l="function"==typeof(l=m.nodata)?l():l)?l={}:"string"==typeof l&&(l={title:l}),l=e.extend({statusNodeType:"nodata",key:i,title:this.options.strings.noData},l),this.getRootNode().addNode(l).match=!0),this._callHook("treeStructureChanged",this,"applyFilter"),this.enableUpdate(a),p},e.ui.fancytree._FancytreeClass.prototype.filterNodes=function(e,t){return"boolean"==typeof t&&(t={leavesOnly:t},this.warn("Fancytree.filterNodes() leavesOnly option is deprecated since 2.9.0 / 2015-04-19. Use opts.leavesOnly instead.")),this._applyFilterImpl(e,!1,t)},e.ui.fancytree._FancytreeClass.prototype.filterBranches=function(e,t){return this._applyFilterImpl(e,!0,t)},e.ui.fancytree._FancytreeClass.prototype.updateFilter=function(){this.enableFilter&&this.lastFilterArgs&&this.options.filter.autoApply?this._applyFilterImpl.apply(this,this.lastFilterArgs):this.warn("updateFilter(): no filter active.")},e.ui.fancytree._FancytreeClass.prototype.clearFilter=function(){var t,n=this.getRootNode()._findDirectChild(i),r=this.options.escapeTitles,o=this.options.enhanceTitle,s=this.enableUpdate(!1);n&&n.remove(),delete this.rootNode.match,delete this.rootNode.subMatchCount,this.visit(function(n){n.match&&n.span&&(t=e(n.span).find(">span.fancytree-title"),r?t.text(n.title):t.html(n.title),o&&o({type:"enhanceTitle"},{node:n,$title:t})),delete n.match,delete n.subMatchCount,delete n.titleWithHighlight,n.$subMatchBadge&&(n.$subMatchBadge.remove(),delete n.$subMatchBadge),n._filterAutoExpanded&&n.expanded&&n.setExpanded(!1,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),delete n._filterAutoExpanded}),this.enableFilter=!1,this.lastFilterArgs=null,this.$div.removeClass("fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide"),this._callHook("treeStructureChanged",this,"clearFilter"),this.enableUpdate(s)},e.ui.fancytree._FancytreeClass.prototype.isFilterActive=function(){return!!this.enableFilter},e.ui.fancytree._FancytreeNodeClass.prototype.isMatched=function(){return!(this.tree.enableFilter&&!this.match)},e.ui.fancytree.registerExtension({name:"filter",version:"2.38.2",options:{autoApply:!0,autoExpand:!1,counter:!0,fuzzy:!1,hideExpandedCounter:!0,hideExpanders:!1,highlight:!0,leavesOnly:!1,nodata:!0,mode:"dimm"},nodeLoadChildren:function(e,t){var n=e.tree;return this._superApply(arguments).done(function(){n.enableFilter&&n.lastFilterArgs&&e.options.filter.autoApply&&n._applyFilterImpl.apply(n,n.lastFilterArgs)})},nodeSetExpanded:function(e,t,n){var i=e.node;return delete i._filterAutoExpanded,!t&&e.options.filter.hideExpandedCounter&&i.$subMatchBadge&&i.$subMatchBadge.show(),this._superApply(arguments)},nodeRenderStatus:function(t){var n=t.node,i=t.tree,r=t.options.filter,o=e(n.span).find("span.fancytree-title"),s=e(n[i.statusClassPropName]),a=t.options.enhanceTitle,l=t.options.escapeTitles,t=this._super(t);return s.length&&i.enableFilter&&(s.toggleClass("fancytree-match",!!n.match).toggleClass("fancytree-submatch",!!n.subMatchCount).toggleClass("fancytree-hide",!(n.match||n.subMatchCount)),!r.counter||!n.subMatchCount||n.isExpanded()&&r.hideExpandedCounter?n.$subMatchBadge&&n.$subMatchBadge.hide():(n.$subMatchBadge||(n.$subMatchBadge=e("<span class='fancytree-childcounter'/>"),e("span.fancytree-icon, span.fancytree-custom-icon",n.span).append(n.$subMatchBadge)),n.$subMatchBadge.show().text(n.subMatchCount)),!n.span||n.isEditing&&n.isEditing.call(n)||(n.titleWithHighlight?o.html(n.titleWithHighlight):l?o.text(n.title):o.html(n.title),a&&a({type:"enhanceTitle"},{node:n,$title:o}))),t}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(t,n,i,r,o){var s=r.map,a=s[o],l=e(n),r=l.find(".fancytree-childcounter"),s=i+" "+(s._addClass||"");"string"==typeof(a="function"==typeof a?a.call(this,t,n,o):a)?(n.innerHTML="",l.attr("class",s+" "+a).append(r)):a&&(a.text?n.textContent=""+a.text:a.html?n.innerHTML=a.html:n.innerHTML="",l.attr("class",s+" "+(a.addClass||"")).append(r))}var n=e.ui.fancytree,i={awesome3:{_addClass:"",checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",dragHelper:"icon-caret-right",dropMarker:"icon-caret-right",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",loading:"icon-refresh icon-spin",nodata:"icon-meh",noExpander:"",radio:"icon-circle-blank",radioSelected:"icon-circle",doc:"icon-file-alt",docOpen:"icon-file-alt",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"},awesome4:{_addClass:"fa",checkbox:"fa-square-o",checkboxSelected:"fa-check-square-o",checkboxUnknown:"fa-square fancytree-helper-indeterminate-cb",dragHelper:"fa-arrow-right",dropMarker:"fa-long-arrow-right",error:"fa-warning",expanderClosed:"fa-caret-right",expanderLazy:"fa-angle-right",expanderOpen:"fa-caret-down",loading:{html:"<span class='fa fa-spinner fa-pulse' />"},nodata:"fa-meh-o",noExpander:"",radio:"fa-circle-thin",radioSelected:"fa-circle",doc:"fa-file-o",docOpen:"fa-file-o",folder:"fa-folder-o",folderOpen:"fa-folder-open-o"},awesome5:{_addClass:"",checkbox:"far fa-square",checkboxSelected:"far fa-check-square",checkboxUnknown:"fas fa-square fancytree-helper-indeterminate-cb",radio:"far fa-circle",radioSelected:"fas fa-circle",radioUnknown:"far fa-dot-circle",dragHelper:"fas fa-arrow-right",dropMarker:"fas fa-long-arrow-alt-right",error:"fas fa-exclamation-triangle",expanderClosed:"fas fa-caret-right",expanderLazy:"fas fa-angle-right",expanderOpen:"fas fa-caret-down",loading:"fas fa-spinner fa-pulse",nodata:"far fa-meh",noExpander:"",doc:"far fa-file",docOpen:"far fa-file",folder:"far fa-folder",folderOpen:"far fa-folder-open"},bootstrap3:{_addClass:"glyphicon",checkbox:"glyphicon-unchecked",checkboxSelected:"glyphicon-check",checkboxUnknown:"glyphicon-expand fancytree-helper-indeterminate-cb",dragHelper:"glyphicon-play",dropMarker:"glyphicon-arrow-right",error:"glyphicon-warning-sign",expanderClosed:"glyphicon-menu-right",expanderLazy:"glyphicon-menu-right",expanderOpen:"glyphicon-menu-down",loading:"glyphicon-refresh fancytree-helper-spin",nodata:"glyphicon-info-sign",noExpander:"",radio:"glyphicon-remove-circle",radioSelected:"glyphicon-ok-circle",doc:"glyphicon-file",docOpen:"glyphicon-file",folder:"glyphicon-folder-close",folderOpen:"glyphicon-folder-open"},material:{_addClass:"material-icons",checkbox:{text:"check_box_outline_blank"},checkboxSelected:{text:"check_box"},checkboxUnknown:{text:"indeterminate_check_box"},dragHelper:{text:"play_arrow"},dropMarker:{text:"arrow-forward"},error:{text:"warning"},expanderClosed:{text:"chevron_right"},expanderLazy:{text:"last_page"},expanderOpen:{text:"expand_more"},loading:{text:"autorenew",addClass:"fancytree-helper-spin"},nodata:{text:"info"},noExpander:{text:""},radio:{text:"radio_button_unchecked"},radioSelected:{text:"radio_button_checked"},doc:{text:"insert_drive_file"},docOpen:{text:"insert_drive_file"},folder:{text:"folder"},folderOpen:{text:"folder_open"}}};return e.ui.fancytree.registerExtension({name:"glyph",version:"2.38.2",options:{preset:null,map:{}},treeInit:function(t){var r=t.tree,t=t.options.glyph;t.preset?(n.assert(!!i[t.preset],"Invalid value for `options.glyph.preset`: "+t.preset),t.map=e.extend({},i[t.preset],t.map)):r.warn("ext-glyph: missing `preset` option."),this._superApply(arguments),r.$container.addClass("fancytree-ext-glyph")},nodeRenderStatus:function(i){var r,o,s=i.node,a=e(s.span),l=i.options.glyph,d=this._super(i);return s.isRootNode()||((o=a.children(".fancytree-expander").get(0))&&(r=s.expanded&&s.hasChildren()?"expanderOpen":s.isUndefined()?"expanderLazy":s.hasChildren()?"expanderClosed":"noExpander",t(s,o,"fancytree-expander",l,r)),(o=(s.tr?e("td",s.tr).find(".fancytree-checkbox"):a.children(".fancytree-checkbox")).get(0))&&(i=n.evalOption("checkbox",s,s,l,!1),s.parent&&s.parent.radiogroup||"radio"===i?t(s,o,"fancytree-checkbox fancytree-radio",l,r=s.selected?"radioSelected":"radio"):t(s,o,"fancytree-checkbox",l,r=s.selected?"checkboxSelected":s.partsel?"checkboxUnknown":"checkbox")),(o=a.children(".fancytree-icon").get(0))&&(r=s.statusNodeType||(s.folder?s.expanded&&s.hasChildren()?"folderOpen":"folder":s.expanded?"docOpen":"doc"),t(s,o,"fancytree-icon",l,r))),d},nodeSetStatus:function(n,i,r,o){var s,a=n.options.glyph,l=n.node,n=this._superApply(arguments);return"error"!==i&&"loading"!==i&&"nodata"!==i||(l.parent?(s=e(".fancytree-expander",l.span).get(0))&&t(l,s,"fancytree-expander",a,i):(s=e(".fancytree-statusnode-"+i,l[this.nodeContainerAttrName]).find(".fancytree-icon").get(0))&&t(l,s,"fancytree-icon",a,i)),n}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree","./jquery.fancytree.table"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree.table"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(t,i){var r,o,s,a,l,d,c=t.closest("td"),u=null;switch(i){case n.LEFT:u=c.prev();break;case n.RIGHT:u=c.next();break;case n.UP:case n.DOWN:for(r=c.parent(),s=r,l=c.get(0),d=0,s.children().each(function(){return this!==l&&(a=e(this).prop("colspan"),void(d+=a||1))}),o=d;(r=i===n.UP?r.prev():r.next()).length&&(r.is(":hidden")||!(u=function(t,n){var i,r=null,o=0;return t.children().each(function(){return n<=o?(r=e(this),!1):(i=e(this).prop("colspan"),void(o+=i||1))}),r}(r,o))||!u.find(":input,a").length););}return u}var n=e.ui.keyCode,i={text:[n.UP,n.DOWN],checkbox:[n.UP,n.DOWN,n.LEFT,n.RIGHT],link:[n.UP,n.DOWN,n.LEFT,n.RIGHT],radiobutton:[n.UP,n.DOWN,n.LEFT,n.RIGHT],"select-one":[n.LEFT,n.RIGHT],"select-multiple":[n.LEFT,n.RIGHT]};return e.ui.fancytree.registerExtension({name:"gridnav",version:"2.38.2",options:{autofocusInput:!1,handleCursorKeys:!0},treeInit:function(t){this._requireExtension("table",!0,!0),this._superApply(arguments),this.$container.addClass("fancytree-ext-gridnav"),this.$container.on("focusin",function(n){var i=e.ui.fancytree.getNode(n.target);i&&!i.isActive()&&(n=t.tree._makeHookContext(i,n),t.tree._callHook("nodeSetActive",n,!0))})},nodeSetActive:function(t,n,i){var r=t.options.gridnav,o=t.node,s=t.originalEvent||{},s=e(s.target).is(":input");n=!1!==n,this._superApply(arguments),n&&(t.options.titlesTabbable?(s||(e(o.span).find("span.fancytree-title").focus(),o.setFocus()),t.tree.$container.attr("tabindex","-1")):r.autofocusInput&&!s&&e(o.tr||o.span).find(":input:enabled").first().focus())},nodeKeydown:function(n){var r,o,s=n.options.gridnav,a=n.originalEvent,n=e(a.target);return n.is(":input:enabled")?r=n.prop("type"):n.is("a")&&(r="link"),r&&s.handleCursorKeys?!((r=i[r])&&0<=e.inArray(a.which,r)&&(o=t(n,a.which))&&o.length&&(o.find(":input:enabled,a").focus(),1)):this._superApply(arguments)}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";return e.ui.fancytree.registerExtension({name:"multi",version:"2.38.2",options:{allowNoSelect:!1,mode:"sameParent"},treeInit:function(t){this._superApply(arguments),this.$container.addClass("fancytree-ext-multi"),1===t.options.selectMode&&e.error("Fancytree ext-multi: selectMode: 1 (single) is not compatible.")},nodeClick:function(t){var n=t.tree,i=t.node,r=n.getActiveNode()||n.getFirstChild(),o="checkbox"===t.targetType,s="expander"===t.targetType;switch(e.ui.fancytree.eventToString(t.originalEvent)){case"click":if(s)break;o||(n.selectAll(!1),i.setSelected());break;case"shift+click":n.visitRows(function(e){if(e.setSelected(),e===i)return!1},{start:r,reverse:r.isBelowOf(i)});break;case"ctrl+click":case"meta+click":return void i.toggleSelected()}return this._superApply(arguments)},nodeKeydown:function(t){var n=t.tree,i=t.node,r=t.originalEvent;switch(e.ui.fancytree.eventToString(r)){case"up":case"down":n.selectAll(!1),i.navigate(r.which,!0),n.getActiveNode().setSelected();break;case"shift+up":case"shift+down":i.navigate(r.which,!0),n.getActiveNode().setSelected()}return this._superApply(arguments)}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";var t=null,n=null,i=null,r=e.ui.fancytree.assert,o="active",s="expanded",a="focus",l="selected";try{r(window.localStorage&&window.localStorage.getItem),n={get:function(e){return window.localStorage.getItem(e)},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)}}}catch(d){e.ui.fancytree.warn("Could not access window.localStorage",d)}try{r(window.sessionStorage&&window.sessionStorage.getItem),i={get:function(e){return window.sessionStorage.getItem(e)},set:function(e,t){window.sessionStorage.setItem(e,t)},remove:function(e){window.sessionStorage.removeItem(e)}}}catch(d){e.ui.fancytree.warn("Could not access window.sessionStorage",d)}return"function"==typeof Cookies?t={get:Cookies.get,set:function(e,t){Cookies.set(e,t,this.options.persist.cookie)},remove:Cookies.remove}:e&&"function"==typeof e.cookie&&(t={get:e.cookie,set:function(t,n){e.cookie(t,n,this.options.persist.cookie)},remove:e.removeCookie}),e.ui.fancytree._FancytreeClass.prototype.clearPersistData=function(e){var t=this.ext.persist,n=t.cookiePrefix;0<=(e=e||"active expanded focus selected").indexOf(o)&&t._data(n+o,null),0<=e.indexOf(s)&&t._data(n+s,null),0<=e.indexOf(a)&&t._data(n+a,null),0<=e.indexOf(l)&&t._data(n+l,null)},e.ui.fancytree._FancytreeClass.prototype.clearCookies=function(e){return this.warn("'tree.clearCookies()' is deprecated since v2.27.0: use 'clearPersistData()' instead."),this.clearPersistData(e)},e.ui.fancytree._FancytreeClass.prototype.getPersistData=function(){var e=this.ext.persist,t=e.cookiePrefix,n=e.cookieDelimiter,i={};return i[o]=e._data(t+o),i[s]=(e._data(t+s)||"").split(n),i[l]=(e._data(t+l)||"").split(n),i[a]=e._data(t+a),i},e.ui.fancytree.registerExtension({name:"persist",version:"2.38.2",options:{cookieDelimiter:"~",cookiePrefix:void 0,cookie:{raw:!1,expires:"",path:"",domain:"",secure:!1},expandLazy:!1,expandOpts:void 0,fireActivate:!0,overrideSource:!0,store:"auto",types:"active expanded focus selected"},_data:function(e,t){var n=this._local.store;return void 0===t?n.get.call(this,e):void(null===t?n.remove.call(this,e):n.set.call(this,e,t))},_appendKey:function(t,n,i){n=""+n;var r=this._local,o=this.options.persist.cookieDelimiter,s=r.cookiePrefix+t,a=r._data(s),t=a?a.split(o):[],a=e.inArray(n,t);0<=a&&t.splice(a,1),i&&t.push(n),r._data(s,t.join(o))},treeInit:function(d){var c=d.tree,u=d.options,f=this._local,h=this.options.persist;return f.cookiePrefix=h.cookiePrefix||"fancytree-"+c._id+"-",f.storeActive=0<=h.types.indexOf(o),f.storeExpanded=0<=h.types.indexOf(s),f.storeSelected=0<=h.types.indexOf(l),f.storeFocus=0<=h.types.indexOf(a),f.store=null,"auto"===h.store&&(h.store=n?"local":"cookie"),e.isPlainObject(h.store)?f.store=h.store:"cookie"===h.store?f.store=t:"local"!==h.store&&"session"!==h.store||(f.store="local"===h.store?n:i),r(f.store,"Need a valid store."),c.$div.on("fancytreeinit",function(t){var n,i,r,d,p,g;!1!==c._triggerTreeEvent("beforeRestore",null,{})&&(r=f._data(f.cookiePrefix+a),d=!1===h.fireActivate,p=f._data(f.cookiePrefix+s),g=p&&p.split(h.cookieDelimiter),(f.storeExpanded?function v(t,n,i,r,o){var a,l,d,c,u=!1,f=t.options.persist.expandOpts,h=[],p=[];for(i=i||[],o=o||e.Deferred(),a=0,d=i.length;a<d;a++)l=i[a],(c=t.getNodeByKey(l))?r&&c.isUndefined()?(u=!0,t.debug("_loadLazyNodes: "+c+" is lazy: loading..."),"expand"===r?h.push(c.setExpanded(!0,f)):h.push(c.load())):(t.debug("_loadLazyNodes: "+c+" already loaded."),c.setExpanded(!0,f)):(p.push(l),t.debug("_loadLazyNodes: "+c+" was not yet found."));return e.when.apply(e,h).always(function(){if(u&&0<p.length)v(t,n,p,r,o);else{if(p.length)for(t.warn("_loadLazyNodes: could not load those keys: ",p),a=0,d=p.length;a<d;a++)l=i[a],n._appendKey(s,i[a],!1);o.resolve()}}),o}(c,f,g,!!h.expandLazy&&"expand",null):(new e.Deferred).resolve()).done(function(){if(f.storeSelected){if(p=f._data(f.cookiePrefix+l))for(g=p.split(h.cookieDelimiter),n=0;n<g.length;n++)(i=c.getNodeByKey(g[n]))?(void 0===i.selected||h.overrideSource&&!1===i.selected)&&(i.selected=!0,i.renderStatus()):f._appendKey(l,g[n],!1);3===c.options.selectMode&&c.visit(function(e){if(e.selected)return e.fixSelection3AfterClick(),"skip"})}f.storeActive&&(!(p=f._data(f.cookiePrefix+o))||!u.persist.overrideSource&&c.activeNode||(i=c.getNodeByKey(p))&&(i.debug("persist: set active",p),i.setActive(!0,{noFocus:!0,noEvents:d}))),f.storeFocus&&r&&(i=c.getNodeByKey(r))&&(c.options.titlesTabbable?e(i.span).find(".fancytree-title"):e(c.$container)).focus(),c._triggerTreeEvent("restore",null,{})}))}),this._superApply(arguments)},nodeSetActive:function(e,t,n){var i=this._local;return t=!1!==t,t=this._superApply(arguments),i.storeActive&&i._data(i.cookiePrefix+o,this.activeNode?this.activeNode.key:null),t},nodeSetExpanded:function(e,t,n){var i=e.node,r=this._local;return t=!1!==t,e=this._superApply(arguments),r.storeExpanded&&r._appendKey(s,i.key,t),e},nodeSetFocus:function(e,t){var n=this._local;return t=!1!==t,t=this._superApply(arguments),n.storeFocus&&n._data(n.cookiePrefix+a,this.focusNode?this.focusNode.key:null),t},nodeSetSelected:function(t,n,i){var r=t.tree,o=t.node,s=this._local;return n=!1!==n,n=this._superApply(arguments),s.storeSelected&&(3===r.options.selectMode?(r=(r=e.map(r.getSelectedNodes(!0),function(e){return e.key})).join(t.options.persist.cookieDelimiter),s._data(s.cookiePrefix+l,r)):s._appendKey(l,o.key,o.selected)),n}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(e,t){e.visit(function(e){var n=e.tr;if(n&&(n.style.display=e.hide||!t?"none":""),!e.expanded)return"skip"})}var n=e.ui.fancytree.assert;return e.ui.fancytree.registerExtension({name:"table",version:"2.38.2",options:{checkboxColumnIdx:null,indentation:16,mergeStatusColumns:!0,nodeColumnIdx:0},treeInit:function(t){var i,r,o,s=t.tree,a=t.options,l=a.table,d=s.widget.element;if(null!=l.customStatus&&(null==a.renderStatusColumns?(s.warn("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' instead."),a.renderStatusColumns=l.customStatus):e.error("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' only instead.")),a.renderStatusColumns&&!0===a.renderStatusColumns&&(a.renderStatusColumns=a.renderColumns),d.addClass("fancytree-container fancytree-ext-table"),(o=d.find(">tbody")).length||(d.find(">tr").length&&e.error("Expected table > tbody > tr. If you see this please open an issue."),o=e("<tbody>").appendTo(d)),s.tbody=o[0],s.columnCount=e("thead >tr",d).last().find(">th",d).length,(r=o.children("tr").first()).length)t=r.children("td").length,s.columnCount&&t!==s.columnCount&&(s.warn("Column count mismatch between thead ("+s.columnCount+") and tbody ("+t+"): using tbody."),s.columnCount=t),r=r.clone();else for(n(1<=s.columnCount,"Need either <thead> or <tbody> with <td> elements to determine column count."),r=e("<tr />"),i=0;i<s.columnCount;i++)r.append("<td />");r.find(">td").eq(l.nodeColumnIdx).html("<span class='fancytree-node' />"),a.aria&&(r.attr("role","row"),r.find("td").attr("role","gridcell")),s.rowFragment=document.createDocumentFragment(),s.rowFragment.appendChild(r.get(0)),o.empty(),s.statusClassPropName="tr",s.ariaPropName="tr",this.nodeContainerAttrName="tr",s.$container=d,this._superApply(arguments),e(s.rootNode.ul).remove(),s.rootNode.ul=null,this.$container.attr("tabindex",a.tabindex),a.aria&&s.$container.attr("role","treegrid").attr("aria-readonly",!0)},nodeRemoveChildMarkup:function(t){t.node.visit(function(t){t.tr&&(e(t.tr).remove(),t.tr=null)})},nodeRemoveMarkup:function(t){var n=t.node;n.tr&&(e(n.tr).remove(),n.tr=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(i,r,o,s,a){var l,d,c,u,f,h,p,g,v,y=i.tree,m=i.node,b=i.options,x=!m.parent;if(!1!==y._enableUpdate){if(a||(i.hasCollapsedParents=m.parent&&!m.parent.expanded),!x)if(m.tr&&r&&this.nodeRemoveMarkup(i),m.tr)r?this.nodeRenderTitle(i):this.nodeRenderStatus(i);else{if(i.hasCollapsedParents&&!o)return;f=y.rowFragment.firstChild.cloneNode(!0),g=function(t){var i,r,o=t.parent,s=o?o.children:null;if(s&&1<s.length&&s[0]!==t)for(r=s[e.inArray(t,s)-1],n(r.tr);r.children&&r.children.length&&(i=r.children[r.children.length-1]).tr;)r=i;else r=o;return r}(m),n(g),(!0===s&&a||o&&i.hasCollapsedParents)&&(f.style.display="none"),g.tr?(v=g.tr).parentNode.insertBefore(f,v.nextSibling):(n(!g.parent,"prev. row must have a tr, or be system root"),(g=y.tbody).insertBefore(f,g.firstChild)),m.tr=f,m.key&&b.generateIds&&(m.tr.id=b.idPrefix+m.key),(m.tr.ftnode=m).span=e("span.fancytree-node",m.tr).get(0),this.nodeRenderTitle(i),b.createNode&&b.createNode.call(y,{type:"createNode"},i)}if(b.renderNode&&b.renderNode.call(y,{type:"renderNode"},i),(l=m.children)&&(x||o||m.expanded))for(c=0,u=l.length;c<u;c++)(p=e.extend({},i,{node:l[c]})).hasCollapsedParents=p.hasCollapsedParents||!m.expanded,this.nodeRender(p,r,o,s,!0);l&&!a&&(h=m.tr||null,d=y.tbody.firstChild,m.visit(function(e){var n;e.tr&&(e.parent.expanded||"none"===e.tr.style.display||(e.tr.style.display="none",t(e,!1)),e.tr.previousSibling!==h&&(m.debug("_fixOrder: mismatch at node: "+e),n=h?h.nextSibling:d,y.tbody.insertBefore(e.tr,n)),h=e.tr)}))}},nodeRenderTitle:function(t,n){var i=t.tree,r=t.node,o=t.options,s=r.isStatusNode(),a=this._super(t,n);return r.isRootNode()||(o.checkbox&&!s&&null!=o.table.checkboxColumnIdx&&(n=e("span.fancytree-checkbox",r.span),e(r.tr).find("td").eq(+o.table.checkboxColumnIdx).html(n)),this.nodeRenderStatus(t),s?o.renderStatusColumns?o.renderStatusColumns.call(i,{type:"renderStatusColumns"},t):o.table.mergeStatusColumns&&r.isTopLevel()&&e(r.tr).find(">td").eq(0).prop("colspan",i.columnCount).text(r.title).addClass("fancytree-status-merged").nextAll().remove():o.renderColumns&&o.renderColumns.call(i,{type:"renderColumns"},t)),a},nodeRenderStatus:function(t){var n=t.node,i=t.options;this._super(t),e(n.tr).removeClass("fancytree-node"),t=(n.getLevel()-1)*i.table.indentation,i.rtl?e(n.span).css({paddingRight:t+"px"}):e(n.span).css({paddingLeft:t+"px"})},nodeSetExpanded:function(n,i,r){function o(e){e?(t(n.node,i),i&&n.options.autoScroll&&!r.noAnimation&&n.node.hasChildren()?n.node.getLastChild().scrollIntoView(!0,{topNode:n.node}).always(function(){r.noEvents||n.tree._triggerNodeEvent(i?"expand":"collapse",n),s.resolveWith(n.node)}):(r.noEvents||n.tree._triggerNodeEvent(i?"expand":"collapse",n),s.resolveWith(n.node))):(r.noEvents||n.tree._triggerNodeEvent(i?"expand":"collapse",n),s.rejectWith(n.node))}if(i=!1!==i,n.node.expanded&&i||!n.node.expanded&&!i)return this._superApply(arguments);var s=new e.Deferred,a=e.extend({},r,{noEvents:!0,noAnimation:!0});return r=r||{},this._super(n,i,a).done(function(){o(!0)}).fail(function(){o(!1)}),s.promise()},nodeSetStatus:function(t,n,i,r){return"ok"!==n||(t=(t=t.node).children?t.children[0]:null)&&t.isStatusNode()&&e(t.tr).remove(),this._superApply(arguments)},treeClear:function(e){return this.nodeRemoveChildMarkup(this._makeHookContext(this.rootNode)),this._superApply(arguments)},treeDestroy:function(e){return this.$container.find("tbody").empty(),this.$source&&this.$source.removeClass("fancytree-helper-hidden"),this._superApply(arguments)}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";return e.ui.fancytree.registerExtension({name:"themeroller",version:"2.38.2",options:{activeClass:"ui-state-active",addClass:"ui-corner-all",focusClass:"ui-state-focus",hoverClass:"ui-state-hover",selectedClass:"ui-state-highlight"},treeInit:function(t){var n=t.widget.element,i=t.options.themeroller;this._superApply(arguments),"TABLE"===n[0].nodeName?(n.addClass("ui-widget ui-corner-all"),n.find(">thead tr").addClass("ui-widget-header"),n.find(">tbody").addClass("ui-widget-conent")):n.addClass("ui-widget ui-widget-content ui-corner-all"),n.on("mouseenter mouseleave",".fancytree-node",function(t){var n=e.ui.fancytree.getNode(t.target),t="mouseenter"===t.type;e(n.tr||n.span).toggleClass(i.hoverClass+" "+i.addClass,t)})},treeDestroy:function(e){this._superApply(arguments),e.widget.element.removeClass("ui-widget ui-widget-content ui-corner-all")},nodeRenderStatus:function(t){var n={},i=t.node,r=e(i.tr||i.span),o=t.options.themeroller;this._super(t),n[o.activeClass]=!1,n[o.focusClass]=!1,n[o.selectedClass]=!1,i.isActive()&&(n[o.activeClass]=!0),i.hasFocus()&&(n[o.focusClass]=!0),i.isSelected()&&!i.isActive()&&(n[o.selectedClass]=!0),r.toggleClass(o.activeClass,n[o.activeClass]),r.toggleClass(o.focusClass,n[o.focusClass]),r.toggleClass(o.selectedClass,n[o.selectedClass]),r.addClass(o.addClass)}}),e.ui.fancytree}),!function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.fancytree"],e):"object"==typeof module&&module.exports?(require("./jquery.fancytree"),module.exports=e(require("jquery"))):e(jQuery)}(function(e){"use strict";function t(t,n){var i=e("#"+(t="fancytree-style-"+t));if(n){i.length||(i=e("<style />").attr("id",t).addClass("fancytree-style").prop("type","text/css").appendTo("head"));try{i.html(n)}catch(t){i[0].styleSheet.cssText=n}return i}i.remove()}function n(e,t,n,i,r,o){for(var s="#"+e+" span.fancytree-level-",a=[],l=0;l<t;l++)a.push(s+(l+1)+" span.fancytree-title { padding-left: "+(l*n+i)+o+"; }");return a.push("#"+e+" div.ui-effects-wrapper ul li span.fancytree-title, #"+e+" li.fancytree-animating span.fancytree-title { padding-left: "+r+o+"; position: static; width: auto; }"),a.join("\n")}var i=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;return e.ui.fancytree.registerExtension({name:"wide",version:"2.38.2",options:{iconWidth:null,iconSpacing:null,labelSpacing:null,levelOfs:null},treeCreate:function(r){this._superApply(arguments),this.$container.addClass("fancytree-ext-wide");var o=r.options.wide,s=e("<li id='fancytreeTemp'><span class='fancytree-node'><span class='fancytree-icon' /><span class='fancytree-title' /></span><ul />").appendTo(r.tree.$container),a=s.find(".fancytree-icon"),l=s.find("ul"),d=o.iconSpacing||a.css("margin-left"),c=o.iconWidth||a.css("width"),u=o.labelSpacing||"3px",f=o.levelOfs||l.css("padding-left");s.remove(),a=d.match(i)[2],d=parseFloat(d,10),o=u.match(i)[2],u=parseFloat(u,10),l=c.match(i)[2],c=parseFloat(c,10),s=f.match(i)[2],a===l&&s===l&&o===l||e.error("iconWidth, iconSpacing, and levelOfs must have the same css measure unit"),this._local.measureUnit=l,this._local.levelOfs=parseFloat(f),this._local.lineOfs=(1+(r.options.checkbox?1:0)+(!1===r.options.icon?0:1))*(c+d)+d,this._local.labelOfs=u,this._local.maxDepth=10,t(u=this.$container.uniqueId().attr("id"),n(u,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.labelOfs,this._local.measureUnit))},treeDestroy:function(e){return t(this.$container.attr("id"),null),this._superApply(arguments)},nodeRenderStatus:function(i){var r=i.node,o=r.getLevel(),s=this._super(i);return o>this._local.maxDepth&&(i=this.$container.attr("id"),this._local.maxDepth*=2,r.debug("Define global ext-wide css up to level "+this._local.maxDepth),t(i,n(i,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.labelSpacing,this._local.measureUnit))),e(r.span).addClass("fancytree-level-"+o),s}}),e.ui.fancytree}),e.ui.fancytree});